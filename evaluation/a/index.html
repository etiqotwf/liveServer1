<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const submitBtn = form.querySelector("button[type='submit']");

    form.addEventListener("submit", function () {
      submitBtn.disabled = true;
      submitBtn.textContent = "ğŸ“¤ Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."; // ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
    });
  });
</script>


  <title>Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¯ÙˆØ±Ø©</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2e;
      color: white;
      display: flex;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: #282a36;
      padding: 30px;
      border-radius: 10px;
      width: 100%;
      max-width: 750px;
      font-size: 20px;
    }

    h2 {
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 15px;
      font-size: 22px;
    }

    select, input[type="text"], input[type="date"], input[type="email"], textarea {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      border-radius: 5px;
      border: none;
      font-size: 20px;
      font-weight: bold;
      color: #000;
    }

    textarea {
      resize: vertical;
      height: 100px;
    }

    .btn {
      background: #ff5555;
      color: white;
      border: none;
      padding: 15px 25px;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 25px;
      font-size: 22px;
      font-weight: bold;
      width: 100%;
    }

    .btn:hover {
      background: #ff79c6;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 34px;
      font-weight: bold;
      color: #ffffff;
      margin-bottom: 5px;
    }

    .header h2 {
      font-size: 26px;
      font-weight: bold;
      color: #ffffff;
    }

    .dtc {
      color: #ff79c6;
    }

@media (max-width: 600px) {
  .logo-container img {
    width: 50px !important;
    height: 50px !important;
  }

  .design-text {
    font-size: 10px !important;
    left: 20px !important;
    top: 60px !important;
  }

  .emoji-icon {
    font-size: 50px !important;
    top: 40px !important;
    right: 30px !important;
  }
}
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.body.addEventListener("click", function () {
        const elem = document.documentElement;
        if (
          !document.fullscreenElement &&
          !document.webkitFullscreenElement &&
          !document.msFullscreenElement
        ) {
          if (elem.requestFullscreen) {
            elem.requestFullscreen();
          } else if (elem.webkitRequestFullscreen) {
            elem.webkitRequestFullscreen(); // Safari
          } else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen(); // IE11
          } else {
            alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… fullscreen.");
          }
        }
      }, { once: true });
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("https://script.google.com/macros/s/AKfycbw5P1p8vgWYf40hBzsSSUhK8ykZWdumWd5GAUuRbsyl5ur8-qyS4_4xoYhCiFQ2PL7UuQ/exec")
        .then(response => response.json())
        .then(data => {
          const datalist = document.getElementById("courseList");
          data.forEach(course => {
            const option = document.createElement("option");
            option.value = course;
            datalist.appendChild(option);
          });
        })
        .catch(error => console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Øª:", error));
    });
  </script>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>Ù…Ø±ÙƒØ² ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØµØ±Ù Ø¨Ø·Ù†Ø·Ø§</h1>
      <h2>Drainage Training Center - Tanta <span class="dtc">(DTC)</span></h2>
    </div>

    <h2>ğŸ“ Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©</h2>

    <form action="https://script.google.com/macros/s/AKfycbw5P1p8vgWYf40hBzsSSUhK8ykZWdumWd5GAUuRbsyl5ur8-qyS4_4xoYhCiFQ2PL7UuQ/exec" method="post">
      <label>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¯Ø±Ø¨:</label>
      <input type="text" name="traineeName" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>

      <label>ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
      <input type="text" name="traineePhone" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>

      <label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
<input type="email" name="traineeEmail" value="tantadtc@gmail.com" readonly>



      <label>ğŸ¢ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:</label>
      <input type="text" name="department" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" required>

      <label>ğŸ“ Ø§Ù„Ù…Ø¤Ù‡Ù„:</label>
      <input type="text" name="qualification" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¤Ù‡Ù„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ" required>

      <label>ğŸ’¼ Ø§Ù„ÙˆØ¸ÙŠÙØ©:</label>
      <input type="text" name="jobTitle" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©" required>

      <label>ğŸ¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©:</label>
<select name="residencyStatus" required>
  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©</option>
  <option value="Ù…Ù‚ÙŠÙ…">Ù…Ù‚ÙŠÙ…</option>
  <option value="Ù…Ù‚ÙŠÙ…Ø©">Ù…Ù‚ÙŠÙ…Ø©</option>
  <option value="ØºÙŠØ± Ù…Ù‚ÙŠÙ…">ØºÙŠØ± Ù…Ù‚ÙŠÙ…</option>
  <option value="ØºÙŠØ± Ù…Ù‚ÙŠÙ…Ø©">ØºÙŠØ± Ù…Ù‚ÙŠÙ…Ø©</option>
</select>


<style>
  select:disabled {
    background-color: white;
    color: black;
  }
</style>

<label>ğŸ“˜ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
<select id="courseName" name="courseName" required>
  <option value="">Ø§Ø®ØªØ± Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©</option>
</select>

<br><br>

<label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
<select id="courseStartDate" name="courseStartDate" disabled required>
  <option value="">---</option>
</select>

<br><br>

<label>ğŸ“… ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
<select id="courseEndDate" name="courseEndDate" disabled required>
  <option value="">---</option>
</select>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // ğŸ—‚ï¸ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØªÙˆØ§Ø±ÙŠØ®Ù‡Ø§
    const courseData = {
      "  amer": { start: "2025-10-5", end: "2025-10-5" },

    };

    const courseSelect = document.getElementById("courseName");
    const startSelect = document.getElementById("courseStartDate");
    const endSelect = document.getElementById("courseEndDate");

    // ğŸ§© ØªÙˆÙ„ÙŠØ¯ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
    Object.keys(courseData).forEach(courseName => {
      const option = document.createElement("option");
      option.value = courseName;
      option.textContent = courseName;
      courseSelect.appendChild(option);
    });

    courseSelect.addEventListener("change", function () {
      const selectedCourse = this.value;

      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
      startSelect.innerHTML = '<option value="">---</option>';
      endSelect.innerHTML = '<option value="">---</option>';

      if (selectedCourse && courseData[selectedCourse]) {
        const startDate = courseData[selectedCourse].start;
        const endDate = courseData[selectedCourse].end;

        // ØªÙˆÙ„ÙŠØ¯ Ø®ÙŠØ§Ø± ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©
        const startOption = document.createElement("option");
        startOption.value = startDate;
        startOption.textContent = startDate;
        startSelect.appendChild(startOption);

        const endOption = document.createElement("option");
        endOption.value = endDate;
        endOption.textContent = endDate;
        endSelect.appendChild(endOption);

        startSelect.disabled = false;
        endSelect.disabled = false;

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        startSelect.value = startDate;
        endSelect.value = endDate;
      } else {
        startSelect.disabled = true;
        endSelect.disabled = true;
      }
    });
  });
</script>


<script>
  // ğŸ—„ï¸ IndexedDB Setup
  let db;
  const request = indexedDB.open("myNewDB", 1); // ğŸ‘ˆ Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¯Ø§ØªØ§ Ø¨ÙŠØ²

  request.onupgradeneeded = function (event) {
    db = event.target.result;
    if (!db.objectStoreNames.contains("records")) { // ğŸ‘ˆ Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³ØªÙˆØ¯Ø¹
      db.createObjectStore("records", { keyPath: "id", autoIncrement: true });
    }
  };

  request.onsuccess = function (event) {
    db = event.target.result;
    console.log("âœ… IndexedDB Ø¬Ø§Ù‡Ø²");
  };

  request.onerror = function () {
    console.error("âŒ Ø®Ø·Ø£ ÙÙŠ IndexedDB");
  };

  // ğŸ“ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙÙ„Ø§ÙŠÙ† ÙÙ‚Ø·
  function saveOffline(formData) {
    const transaction = db.transaction(["records"], "readwrite"); // ğŸ‘ˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    const store = transaction.objectStore("records");
    store.add(formData);
    console.log("ğŸ’¾ Ø§ØªØ­ÙØ¸ Ø£ÙˆÙÙ„Ø§ÙŠÙ†:", formData);
  }

  // â˜ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù€ Google Sheet
  function sendToGoogleSheets(formData, callback) {
    fetch("https://script.google.com/macros/s/AKfycbw5P1p8vgWYf40hBzsSSUhK8ykZWdumWd5GAUuRbsyl5ur8-qyS4_4xoYhCiFQ2PL7UuQ/exec", {
      method: "POST",
      body: new URLSearchParams(formData)
    })
    .then(res => res.text())
    .then(txt => {
      console.log("Ø±Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±:", txt);
      if (txt.includes("success") || txt.includes("ØªÙ…")) {
        if (callback) callback(true);
      } else {
        if (callback) callback(false);
      }
    })
    .catch(() => {
      if (callback) callback(false);
    });
  }

  // ğŸ”„ Ù…Ø²Ø§Ù…Ù†Ø© ÙƒÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ù…Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
  function syncPendingData() {
    const transaction = db.transaction(["records"], "readwrite"); // ğŸ‘ˆ Ù†ÙØ³ Ø§Ù„ØªØºÙŠÙŠØ±
    const store = transaction.objectStore("records");
    const getAll = store.getAll();

    getAll.onsuccess = function () {
      const items = getAll.result;
      if (items.length === 0) {
        console.log("âœ… Ù…ÙÙŠØ´ Ø³Ø¬Ù„Ø§Øª Ù…Ø¹Ù„Ù‚Ø©");
        return;
      }

      let pending = items.length;
      items.forEach(item => {
        sendToGoogleSheets(item, function (success) {
          if (success) {
            store.delete(item.id);
            console.log("ğŸ—‘ï¸ Ø§ØªØ­Ø°Ù Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©:", item);
          } else {
            console.warn("âš ï¸ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ù‡Ù†Ø¬Ø±Ø¨ ØªØ§Ù†ÙŠ:", item);
          }

          pending--;
          if (pending === 0) {
            setTimeout(syncPendingData, 5000);
          }
        });
      });
    };
  }

  // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¹Ù†Ø¯ Ø±Ø¬ÙˆØ¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
  window.addEventListener("online", syncPendingData);

  // ğŸ¯ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙÙˆØ±Ù…
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");

    form.addEventListener("submit", function (e) {
  if (!navigator.onLine) {
    e.preventDefault();
    const formData = Object.fromEntries(new FormData(form).entries());
    saveOffline(formData);
    form.reset();
    alert("âš ï¸ Ù…ÙÙŠØ´ Ø¥Ù†ØªØ±Ù†Øª.. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§ØªØ­ÙØ¸Øª ÙˆÙ‡ØªØªØ¨Ø¹Øª ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù…Ø§ Ø§Ù„Ù†Øª ÙŠØ±Ø¬Ø¹ âœ…");

    // ğŸ”„ Ø¹Ù…Ù„ Refresh Ù„Ù„ØµÙØ­Ø© Ø¹Ø´Ø§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯
    location.reload();
  }
});

  });
</script>

<label>ğŸ§‘â€ğŸ« ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø¯Ø±Ø¨:</label>
<select name="trainerRating">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
  <option>Ù…Ù…ØªØ§Ø²</option>
  <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
  <option>Ø¬ÙŠØ¯</option>
  <option>Ù…Ù‚Ø¨ÙˆÙ„</option>
  <option>Ø¶Ø¹ÙŠÙ</option>
</select>

<label>ğŸ“š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©:</label>
<select name="contentRating">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
  <option>Ù…Ù…ØªØ§Ø²</option>
  <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
  <option>Ø¬ÙŠØ¯</option>
  <option>Ù…Ù‚Ø¨ÙˆÙ„</option>
  <option>Ø¶Ø¹ÙŠÙ</option>
</select>

<label>ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªÙ†Ø¸ÙŠÙ… ÙˆÙ‚Ø§Ø¹Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª:</label>
<select name="organizationRating">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
  <option>Ù…Ù…ØªØ§Ø²</option>
  <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
  <option>Ø¬ÙŠØ¯</option>
  <option>Ù…Ù‚Ø¨ÙˆÙ„</option>
  <option>Ø¶Ø¹ÙŠÙ</option>
</select>

<label>ğŸ¨ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©:</label>
<select name="residencyRating">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
  <option>Ù…Ù…ØªØ§Ø²</option>
  <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
  <option>Ø¬ÙŠØ¯</option>
  <option>Ù…Ù‚Ø¨ÙˆÙ„</option>
  <option>Ø¶Ø¹ÙŠÙ</option>
</select>



      <label>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</label>
      <textarea name="comments" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø¥Ù† ÙˆØ¬Ø¯Øª..."></textarea>

      <button class="btn" type="submit">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
    </form>
  </div>

<!-- Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… ÙÙŠ Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠØ³Ø§Ø± -->
<div class="design-text" style="
  position: absolute;
  top: 80px;
  left: 70px;
  font-size: 14px;
  font-weight: 800;
  background: whitesmoke;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  user-select: none;
">
 <div class="logo-container" style="text-align: center; margin-bottom: 10px;">
  <img src="logo.jpg" alt="Ø§Ù„Ø´Ø¹Ø§Ø±" style="
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  ">
  <div style="
    margin-top: 8px;
    font-size: 20px;
    font-weight: bold;
    color: #333;
    font-family: Arial, sans-serif;
  ">
    Tanta (DTC)
  </div>

</div>

<!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ğŸ“ -->
<div class="emoji-icon" style="
  position: fixed;
  top: 80px;
  right: 50px;
  font-size: 70px;
  font-weight: bold;
  color: gold;
">
  ğŸ“
</div>
</body>
</html>
