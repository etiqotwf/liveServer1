<!DOCTYPE html>
<html lang="en" class="notranslate">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Ù…Ù†Ø¹ Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª -->
  <meta name="google" content="notranslate">

  <title>Reading Comprehension Quiz</title>

<style>
/* Ù…Ù†Ø¹ Ø§Ù„Ø³Ø­Ø¨ Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
html, body {
  overscroll-behavior: none; /* ÙŠÙ…Ù†Ø¹ pull-to-refresh */
  touch-action: pan-x pan-y; /* ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙÙ‚Ø· */
  -webkit-overflow-scrolling: auto; /* ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ */
}
</style>

<script>
// Ù…Ù†Ø¹ Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ø£Ø³ÙÙ„ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (pull-to-refresh)
let lastTouchY = 0;
let maybePreventPullToRefresh = false;

document.addEventListener('touchstart', function(e) {
  if (e.touches.length !== 1) return;
  lastTouchY = e.touches[0].clientY;
  maybePreventPullToRefresh = window.pageYOffset === 0;
}, {passive: true});

document.addEventListener('touchmove', function(e) {
  const touchY = e.touches[0].clientY;
  const touchYDelta = touchY - lastTouchY;
  lastTouchY = touchY;

  if (maybePreventPullToRefresh) {
    // Ø¥Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³Ø­Ø¨ Ù„Ø£Ø³ÙÙ„ Ù…Ù† Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
    if (touchYDelta > 0) {
      e.preventDefault();
    }
  }
}, {passive: false});
</script>



  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 0;
      background: #1e1e2e;
      color: white;
    }

    .container {
      margin-top: 5px;
      width: 95%;
      max-width: 1200px;
      background: #282a36;
      padding: 10px 30px 30px;
      border-radius: 10px;
      box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
      text-align: left;
    }

    h1, h2, p { margin-top: 0; }

    .question {
      font-weight: bold;
      font-size: 30px;
      margin-bottom: 20px;
    }

    .options label {
      display: block;
      padding: 10px;
    }

    .btn {
      background: #ff5555;
      color: white;
      border: none;
      padding: 12px 25px;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 200px;
      font-size: 18px;
      display: block;
    }

    .btn:hover { background: #ff79c6; }

    .result-screen {
      display: none;
      background: #44475a;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 100%;
    }

    #resultScore {
      font-size: 36px;
      font-weight: bold;
      color: #ffffff;
      margin-top: 20px;
    }

    .result-screen p {
      font-size: 20px;
      font-weight: bold;
      color: #f8f8f2;
    }

    #timer {
  font-size: 28px;
  color: #222; /* Ù„ÙˆÙ† ØºØ§Ù…Ù‚ Ø¹Ø´Ø§Ù† ÙŠØ¸Ù‡Ø± ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  font-weight: bold;
  background: rgba(255, 215, 0, 0.2); /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ø°Ù‡Ø¨ÙŠØ© Ø®ÙÙŠÙØ© */
  padding: 10px 20px;
  border-radius: 10px;
  width: fit-content;
  margin: 20px auto;
  position: relative;
  z-index: 2;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}


    .author {
      font-size: 30px;
      color: #eb2d0b;
      text-align: center;
      font-weight: bold;
      margin-bottom: 15px;
    }

    label {
      font-size: 22px;
      padding: 10px;
      display: block;
    }

    input[type="radio"] {
      transform: scale(1.5);
      margin-right: 10px;
    }

    #passage { font-size: 16px; font-weight: bold; }

    #startScreen p {
      font-size: 22px;
      font-weight: bold;
    }

    #startScreen input {
      font-size: 20px;
      font-weight: bold;
      padding: 8px;
    }

    #startScreen h1 {
      font-size: 40px;
      font-weight: bold;
      color: #ffd700;
      text-align: center;
      margin-bottom: 20px;
    }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
    #quizContainer {
      display: none;
      position: relative;
      background: #ffffff;
      color: #000;
      border-radius: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      padding: 40px;
      max-width: 1000px;
      text-align: left;
      overflow: hidden;
    }

    

    /* Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø´ÙØ§Ù ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
    #quizContainer::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url('ilc.jpg') center center no-repeat;
      background-size: 60%;
      opacity: 0.2;
      z-index: 0;
    }

    #quizContainer > * { position: relative; z-index: 1; }

    @keyframes fall {
      to { transform: translateY(110vh); opacity: 0.5; }
    }

    
    @keyframes fadeIn {
  from { opacity:0; transform:translate(-50%, -60%); }
  to   { opacity:1; transform:translate(-50%, -50%); }
}



  </style>
</head>

<body>

  <div id="errorBox" style="
  display:none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background:#cc0000;
  color:white;
  padding:20px 25px;
  border-radius:12px;
  font-size:20px;
  font-weight:700;
  text-align:center;
  z-index:9999;
  width: 80%;
  max-width: 380px;
  box-shadow:0 0 15px rgba(0,0,0,0.4);
  animation: fadeIn 0.3s ease;
"></div>





<!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø± -->
<div id="duplicateMessage" style="display:none !important; position:fixed; top:20px; left:50%; transform:translateX(-50%);
    background-color:#ff4d4f; color:white; padding:15px 25px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2);
    font-family:Arial, sans-serif; z-index:9999; font-size:16px; display:flex; align-items:center; gap:10px;">
    <span id="duplicateIcon" style="font-size:20px;">âŒ</span>
    <span id="duplicateText">ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ù‹Ø§</span>
</div>



 <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div class="container" id="startScreen" style="
max-width: 700px; 
margin: 60px auto; 
padding: 40px; 
background: #ffffff; 
border-radius: 25px; 
box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
text-align: center; 
font-family: 'Trebuchet MS', sans-serif;
position: relative;
overflow: hidden;
">


<!-- Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© Ø®Ù„Ù Ø§Ù„Ù†Øµ -->
<img src="ilc.jpg" alt="ILC Logo" style="
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 600px;       /* Ø­Ø¬Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© */
  opacity: 0.1;       /* Ø§Ù„Ø´ÙØ§ÙÙŠØ© */
  pointer-events: none;
  user-select: none;
  z-index: 0; /* Ø®Ù„Ù Ø§Ù„Ù†ØµÙˆØµ Ù„ÙƒÙ† ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© */
">

<h1 style="color:#0056b3; font-size:35px; margin-bottom: 20px;">
  ğŸŒ The International British Institute   ğŸŒ
</h1>


<!-- Course Name (ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ ÙˆØ¹Ù„Ù‰ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯) -->
<div style="
  display: flex;
  justify-content: left;
  align-items: center;
  gap: 15px;
  margin: 20px 0;
">
  <label for="courseName" style="
    font-size: 22px;
    font-weight: bold;
    color:#0056b3;
    white-space: nowrap;
  ">
    ğŸ“˜ Course Name:
  </label>

  <input type="text" id="courseName" value="(A2)" readonly 
    style="
      font-size: 25px;
      padding:12px;
      width:60%;
      border:none;
      border-radius:10px;
      background:#f0f0f0;
      text-align:center;
      color:#000;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    ">
</div>


<!-- Enter Your Name -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ‘¤ Enter Your Name:
  </span>
  <input type="text" id="traineeName" placeholder="Type your name..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Your Phone Number -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ“± Enter Your Phone Number:
  </span>
  <input type="text" id="traineePhone" placeholder="Type your phone number..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Trainee Code -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ§¾ Enter Your Code:
  </span>
  <input type="text" id="traineeCode" placeholder="Enter your code..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Password -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ”‘ Enter Password:
  </span>
  <input type="password" id="password" placeholder="Enter password..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Ø²Ø± Start Quiz -->
<div style="text-align:center; margin-top: 15px;">

  <!-- Ø²Ø± Start Quiz -->
  <button id="startBtn" onclick="startQuiz(event)" style="
    font-size: 22px; 
    padding: 15px 50px; 
    border:none; 
    border-radius:12px; 
    background: linear-gradient(270deg, #ff0055, #ff5500, #ff00ff, #007bff, #00d4ff);
    background-size: 1000% 1000%;
    color:white; 
    cursor:pointer; 
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    animation: gradientMove 4s ease infinite, glowPulse 2s infinite;
    transition: transform 0.2s;
  " onmouseover="this.style.transform='scale(1.1)'" 
     onmouseout="this.style.transform='scale(1)'">
    <span class="emoji" style="display:inline-block; margin-right:10px; animation: bounce 1s infinite;">ğŸš€</span>
    Start Quiz
  </button>

  <!-- Ù†Øµ Admin Control ØªØ­Øª Ø§Ù„Ø²Ø± -->
<div id="adminText" onclick="toggleAdmin()" style="
    font-size: 16px;
    color: rgba(0,0,0,0.4); /* Ø®ÙÙŠÙ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ */
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    margin-top: 20px; /* Ø²Ø¯Ù†Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† 8px Ø¥Ù„Ù‰ 20px */
">
    ğŸ”’ Admin Control
</div>


</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø§Ø¯Ù…Ù† -->
<div id="adminModal" style="
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.6);
  justify-content:center;
  align-items:center;
  z-index:1000;
">
  <div style="
    background: linear-gradient(135deg,#ff0055,#007bff,#00d4ff);
    padding:30px; border-radius:20px;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
    text-align:center;
    color:white;
    min-width:300px;
  ">
    <h2 style="margin-bottom:20px;">ğŸ”‘ Admin Password</h2>
    <input id="adminPwdInput" type="password" placeholder="Enter password" style="
      font-size:18px;
      padding:10px;
      width:80%;
      border-radius:10px;
      border:none;
      text-align:center;
      margin-bottom:20px;
    ">
    <br>
    <button onclick="submitAdminPwd()" style="
      font-size:16px;
      padding:10px 25px;
      border:none;
      border-radius:10px;
      background:#ff0a54;
      color:white;
      cursor:pointer;
      font-weight:bold;
      transition:0.3s;
    " onmouseover="this.style.background='#ff3366'" onmouseout="this.style.background='#ff0a54'">
      Submit
    </button>
    <br><br>
    <span id="adminMsg" style="font-size:14px;"></span>
  </div>
</div>

<script>
let startBtn = document.getElementById("startBtn");
let adminText = document.getElementById("adminText");
let adminModal = document.getElementById("adminModal");
let adminMsg = document.getElementById("adminMsg");
let adminPwdInput = document.getElementById("adminPwdInput");

const adminPassword = "Mahmoud#Osama";
let quizDisabled = false;

function toggleAdmin() {
  // ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
  adminPwdInput.value = "";
  adminMsg.innerHTML = "";
  adminModal.style.display = "flex";  // ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
  adminPwdInput.focus();
}

function submitAdminPwd() {
  const pwd = adminPwdInput.value.trim();

  if (!pwd) {
    adminMsg.innerHTML = "âŒ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯!";
    adminMsg.style.color = "#ff3333";
    adminPwdInput.focus();
    return;
  }

  if (pwd !== adminPassword) {
    adminMsg.innerHTML = "âŒ Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ø£Ø¯Ù…Ù† ØºÙŠØ± ØµØ­ÙŠØ­!";
    adminMsg.style.color = "#ff3333";
    adminPwdInput.value = "";
    adminPwdInput.focus();
    return;
  }

  // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
  quizDisabled = !quizDisabled;

  const status = quizDisabled ? 1 : 0;

  if (quizDisabled) {
    startBtn.disabled = true;
    startBtn.innerText = "Stopped...";
    adminText.innerText = "âŒ Quiz Disabled by Admin";
    adminMsg.innerHTML = "âš ï¸ Quiz has been disabled!";
    adminMsg.style.color = "#ffff66";
  } else {
    startBtn.disabled = false;
    startBtn.innerText = "Start Quiz";
    adminText.innerText = "ğŸ”“ Admin Control";
    adminMsg.innerHTML = "âœ… Quiz has been enabled!";
    adminMsg.style.color = "#66ff66";
  }

  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© sendDataToGoogleSheet
  const formData = new URLSearchParams();
  formData.append("course", "AdminControl"); // Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø³Ø·Ø± Ø¹Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒÙˆÙŠØ²
  formData.append("name", status);           // 1 Ø£Ùˆ 0
  formData.append("phone", "");
  formData.append("date", new Date().toISOString());
  formData.append("startTime", "");
  formData.append("timeTaken", "");
  formData.append("score", "");

  fetch("https://script.google.com/macros/s/AKfycbxUVWA9OIRnfa8kg9eNrdhPqAFhaXkHidTbFdWOqqiQOjJ0nQ0ykRayQduWzUCRZh9J/exec", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: formData.toString()
  })
  .then(response => response.text())
  .then(responseText => {
    console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø¥Ù„Ù‰ Google Sheet:", responseText);
  })
  .catch(error => {
    console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø¥Ù„Ù‰ Google Sheet:", error);
  });

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
  setTimeout(() => {
    adminModal.style.display = "none";
  }, 1000);
}


</script>


<p style="margin-top: 40px; font-size: 18px; color: gray;">
  âœï¸ Edited by: Ahmed Amer
</p>

<!-- Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ù…Ø·Ø± -->
<div id="emojiRain" style="
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  font-size: 2rem;
"></div>
</div>

<style>
@keyframes gradientMove {
0% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
100% { background-position: 0% 50%; }
}

@keyframes glowPulse {
0%, 100% { box-shadow: 0 8px 20px rgba(255, 0, 85, 0.6), 0 0 10px rgba(255, 255, 255, 0.2); }
50% { box-shadow: 0 8px 25px rgba(255, 0, 85, 0.9), 0 0 20px rgba(255, 255, 255, 0.4); }
}

@keyframes bounce {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-8px); }
}
</style>

<script>
const emojis = ["ğŸ“","âœï¸","ğŸ“˜","ğŸ“–","â³","ğŸ¯","ğŸ†","ğŸ“Š","ğŸ‘¨â€ğŸ“"];
const container = document.getElementById("emojiRain");
let rainInterval;

function createEmoji() {
const emoji = document.createElement("div");
emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
emoji.style.position = "absolute";
emoji.style.left = Math.random() * 100 + "vw";
emoji.style.top = "-50px";
emoji.style.fontSize = "28px";
emoji.style.animation = `fall ${6 + Math.random() * 3}s linear`;
container.appendChild(emoji);
setTimeout(() => emoji.remove(), 2000);
}

function startEmojiRain() {
rainInterval = setInterval(createEmoji, 500);
}

function stopEmojiRain() {
clearInterval(rainInterval);
container.innerHTML = "";
}

startEmojiRain();

function startQuiz() {
document.getElementById("startScreen").style.display = "none";
stopEmojiRain();
// Ù‡Ù†Ø§ Ø¶Ø¹ Ø£ÙŠ ÙƒÙˆØ¯ Ù„ØªØ¸Ù‡Ø± Ø´Ø§Ø´Ø© Ø§Ù„ÙƒÙˆÙŠØ²
}
</script>


  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
  <div class="container" id="quizContainer">
    <h2 id="quizTitle">Placement Test</h2>
    <p class="author"> ğŸŒ The International British Institute  ğŸŒ 
    <p>Date: <span id="date"></span></p>
     <!-- Emoji Sticky Animation -->
 <div id="emoji-character" style="
    position: sticky;
    top: 10px;
    float: right;
    margin-left: auto;
    display: block;
    z-index: 10;
">
  <img src="ilc.jpg" alt="ILC Logo" style="
      width: 180px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
  ">
</div>

    <p id="timer"> ----- </p>
    <div id="passage">
      <h3>Read the following passage carefully and answer the following questions:</h3>
      <p style="font-size: 22px;"></p>
    </div>
    <div id="quiz"></div>

  
  </div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div class="result-screen" id="resultScreen" style="
display:none;
background: #0056b3; /* Ø®Ù„ÙÙŠØ© ÙÙˆØ±Ù…Ø§Ù„ Ø£Ø²Ø±Ù‚ Ø«Ø§Ø¨Øª */
padding: 40px;
border-radius: 25px;
text-align: center;
color: #fff;
position: relative;
font-family: 'Arial', sans-serif;
max-width: 800px;
margin: 40px auto;
box-shadow: 0 0 20px rgba(0,0,0,0.4);
border: 3px solid #ffd700; /* Ø¨ÙˆØ±Ø¯Ø± Ø°Ù‡Ø¨ÙŠ Ø£Ù†ÙŠÙ‚ */
overflow: hidden;
">

<h1 id="resultTitle" style="font-size: 46px; margin-bottom: 25px; font-weight:bold;"></h1>

<p style="font-size: 30px; margin: 12px 0;">
  ğŸ“˜ <strong>Course Name:</strong> <span id="resultCourse"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  ğŸ‘¤ <strong>Name:</strong> <span id="resultName"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  ğŸ“± <strong>Phone Number:</strong> <span id="resultPhone"></span>
</p>

<p style="font-size: 28px; margin: 12px 0;">
  ğŸ†” <strong>Code:</strong> <span id="resultCode"></span>
</p>


<p style="font-size: 28px; margin: 12px 0;">
  ğŸ“… <strong>Test Date:</strong> <span id="resultDate"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  â° <strong>Start Time:</strong> <span id="resultStartTime"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  â±ï¸ <strong>Time Taken:</strong> <span id="resultTime"></span>
</p>

<!-- Score & Rating (Ø§Ù„Ø³ÙƒÙˆØ± Ù…Ø®ÙÙŠ Ù„ÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ø´Ø§Ù† Ø§Ù„ÙƒÙˆØ¯ Ù…Ø§ ÙŠÙ‚Ø¹Ø´) -->
<p style="font-size: 32px; font-weight: bold; color: #ffd700; margin-top: 25px;">
  <span id="resultScore" style="display:none;"></span>
  ğŸ† Grade: <span id="resultRating"></span>
</p>




<a href="https://docs.google.com/forms/d/e/1FAIpQLSdO8aYvcG_LM3mYIdLPWDdh2p88VGIYab8XBJFWFsKTWOvLcw/viewform" target="_blank" style="
  display:block;
  margin-top: 30px;
  font-size:28px;
  font-weight:bold;
  color:#fff;
  text-decoration: underline;
">
  ğŸ“ Click here to request your certificate
</a>

<!-- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ© -->
<div id="fireworks" style="
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
"></div>
</div>

<style>
/* Score Ùˆ Rating Ø£Ù„ÙˆØ§Ù† Ø°Ù‡Ø¨ÙŠØ© Ø«Ø§Ø¨ØªØ© */
#resultScore, #resultRating {
  background: none !important;
  -webkit-background-clip: none !important;
  -webkit-text-fill-color: #ffd700; /* Ø°Ù‡Ø¨ÙŠ */
  animation: none !important;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© */
.result-screen p {
  font-family: 'Arial', sans-serif;
  line-height: 1.6;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø±Ø§Ø¨Ø· */
.result-screen a:hover {
  color: #ffd700;
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ© */
@keyframes fireworkFall {
  0% { transform: translateY(0) scale(1); opacity:1; }
  100% { transform: translateY(-100px) scale(0.5); opacity:0; }
}
</style>

<script>
// Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
let traineeData = {
  course: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
  name: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
  phone: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"
};

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
function setTraineeData(course, name, phone) {
  traineeData.course = course || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  traineeData.name = name || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  traineeData.phone = phone || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¬Ø©
function calculateRating(score, maxScore) {
  if (score === undefined || maxScore === undefined) return "ØºÙŠØ± Ù…Ø­Ø¯Ø¯ â“";

  // Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³
  if (score >= 0 && score < 5) return "Pass âœ…";
  else if (score >= 5 && score < 15) return "Good ğŸ™‚";
  else if (score >= 15 && score < 25) return "Very Good ğŸ‘";
  else if (score >= 25 && score <= maxScore) return "Excellent ğŸŒŸ";
  else return "ØºÙŠØ± Ù…Ø­Ø¯Ø¯ â“";
}


// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ø±Ù‚Ù…
function displayRatingFromNumber(score, maxScore) {
  const ratingEl = document.getElementById("resultRating");
  if (!ratingEl) return;
  const rating = calculateRating(score, maxScore);
  ratingEl.innerText = rating;
}

// Ø¯Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©
function launchFireworks() {
  const fireworks = document.getElementById('fireworks');
  for(let i=0;i<50;i++){
    const emoji = document.createElement('div');
    emoji.innerText = "ğŸ†";
    emoji.style.position = "absolute";
    emoji.style.left = Math.random()*100 + "%";
    emoji.style.top = Math.random()*100 + "%";
    emoji.style.fontSize = (20 + Math.random()*30) + "px";
    emoji.style.animation = `fireworkFall ${2+Math.random()*2}s linear forwards`;
    fireworks.appendChild(emoji);
    setTimeout(()=> emoji.remove(), 4000);
  }
}


</script>



<script>
    // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„ØµÙØ­Ø©ØŒ Ø£Ø¯Ø®Ù„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
    document.addEventListener("click", () => {
      const elem = document.documentElement; // Ø£Ùˆ document.getElementById("myForm")
      if (document.fullscreenElement) return; // Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¡ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©

      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    });
  </script>

    
   <script>
       document.getElementById("date").innerText = new Date().toLocaleDateString("en-US");
    
    const trueFalseQuestions = [
   {
     passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "Rodrigo Santoro studied acting in college.",
     a: "False", // B
     options: ["True", "False"]
   },
   {
    passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "He won an award for his role in Bicho de Sete CabeÃ§as.",
     a: "True", // A
     options: ["True", "False"]
   },
   {
    passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "He worked in Brazil before he worked in Hollywood.",
     a: "False", // B (Ù„ØªÙˆØ§ÙÙ‚ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø¯Ø±Ø³)
     options: ["True", "False"]
   },
   {
    passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "He won an MTV Movie Award for the role of King Xerxes.",
     a: "False", // B
     options: ["True", "False"]
   },
   {
    passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "He always plays very similar roles.",
     a: "True", // A
     options: ["True", "False"]
   },
   {
    passage: `Rodrigo Santoro<br>
 Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
 After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete CabeÃ§as in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
 During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in SÃ£o Paulo. He was nominated as Best Actor at the PrÃªmio Contigo Cinema for his performance in the 2007 film NÃ£o Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
 With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
     q: "He once played soccer for a children's charity.",
     a: "False", // B
     options: ["True", "False"]
   }
 ];
 
     
 const questions = [
   { q: "7- Where was Rodrigo Santoro born?", a: "a", options: ["USA", "Brazil", "Argentina", "Spain"] }, // A
   { q: "8- What year was Rodrigo Santoro born?", a: "a", options: ["1980", "1970", "1975", "1965"] }, // A
   { q: "9- What did he do as a child?", a: "a", options: ["Organized puppet performances", "Played soccer professionally", "Acted in movies", "Sang in a band"] }, // A
   { q: "10- Which course did he study in college?", a: "b", options: ["Medicine", "Engineering", "Law", "Communications"] }, // B
   { q: "11- When did he act in Olho no Olho?", a: "b", options: ["1990", "1995", "1993", "1998"] }, // B
   { q: "12- When did he act in Hilda Furacao?", a: "c", options: ["1993", "1990", "1995", "1998"] }, // C
   { q: "13- Which movie gave him his first big role?", a: "a", options: ["Carandiru", "Bicho de Sete CabeÃ§as", "Love Actually", "300"] }, // A
   { q: "14- What award did he win for Bicho de Sete CabeÃ§as?", a: "b", options: ["Best Actor at Cartagena Film Festival", "MTV Movie Award", "Oscar", "Golden Globe"] }, // B
   { q: "15- Which Hollywood movies did he act in 2003?", a: "b", options: ["300, Carandiru, Love Actually", "Bicho de Sete CabeÃ§as, Che: Part Two", "Charlie's Angels, The Roman Spring of Mrs. Stone, Love Actually", "Carandiru, Olho no Olho"] }, // B
   { q: "16- Which role got him MTV Best Villain nomination?", a: "b", options: ["President Raul Castro", "Oriol", "King Xerxes in 300", "Himself in a soap opera"] }, // B
   { q: "17- Which Brazilian movie did he star in 2003?", a: "a", options: ["Bicho de Sete CabeÃ§as", "Carandiru", "Love Actually", "There Be Dragons"] }, // A
   { q: "18- In Che: Part Two (2008), which character did he play?", a: "c", options: ["King Xerxes", "Hugh Grant", "President Raul Castro", "Oriol"] }, // C
   { q: "19- In There Be Dragons (2011), which character did he play?", a: "a", options: ["King Xerxes", "President Raul Castro", "Hugh Grant", "Oriol"] }, // A
   { q: "20- How does he balance his busy life in Rio?", a: "b", options: ["By traveling frequently", "Reading, listening to music, and meditating", "By acting nonstop", "By doing nothing"] }, // B
   { q: "21- Which sport did he play for charity in 2008?", a: "c", options: ["Soccer", "Basketball", "Tennis", "Volleyball"] }, // C
   { q: "22- Which charity benefits from Soccer Aid?", a: "c", options: ["Red Cross", "UNICEF USA", "UNICEF", "World Food Program"] }, // C
   { q: "23- Which international stars did he play with for Soccer Aid?", a: "c", options: ["Louis Figo and Alan Shearer", "Drew Barrymore and Hugh Grant", "Helen Mirren and Hugh Grant", "Alan Shearer and Hugh Grant"] }, // C
   { q: "24- What did he organize during family vacations as a child?", a: "a", options: ["Puppet performances", "Soccer games", "Cooking contests", "Music shows"] }, // A
   { q: "25- In which soap opera did he act in 1998?", a: "b", options: ["Olho no Olho", "Carandiru", "Bicho de Sete CabeÃ§as", "Hilda Furacao"] }, // B
   { q: "26- Which of these films is a mental hospital story?", a: "c", options: ["Love Actually", "Bicho de Sete CabeÃ§as", "300", "Carandiru"] }, // C
   { q: "27- Which role in 300 made him famous internationally?", a: "d", options: ["Love Actually character", "Carandiru character", "King Xerxes", "President Raul Castro"] }, // D
   { q: "28- Where does he live?", a: "b", options: ["SÃ£o Paulo", "Rio de Janeiro", "Petropolis", "Buenos Aires"] }, // B
   { q: "29- What hobby does he do besides acting?", a: "a", options: ["Painting", "Reading, music, meditation", "Cooking", "Dancing"] }, // A
   { q: "30- When did he start acting in television soap operas?", a: "b", options: ["1990", "1995", "1993", "1998"] }, // B
   { q: "31- Which award nomination did he receive for NÃ£o Por Acaso?", a: "c", options: ["MTV Movie Award", "Best Actor at PrÃªmio Contigo Cinema", "Oscar", "Golden Globe"] }, // C
   { q: "32- Name a Hollywood movie with Drew Barrymore he acted in.", a: "a", options: ["Charlie's Angels: Full Throttle", "Love Actually", "300", "The Roman Spring of Mrs. Stone"] }, // A
   { q: "33- Name a Hollywood movie with Helen Mirren he acted in.", a: "a", options: ["300", "Charlie's Angels: Full Throttle", "Love Actually", "The Roman Spring of Mrs. Stone"] }, // A
   { q: "34- Name a Hollywood movie with Hugh Grant he acted in.", a: "a", options: ["300", "Charlie's Angels: Full Throttle", "Love Actually", "Che: Part Two"] }, // A
   { q: "35- In which year was 300 released?", a: "c", options: ["2003", "2005", "2007", "2008"] }, // C
   { q: "36- Which country is he originally from?", a: "b", options: ["USA", "Brazil", "Spain", "Argentina"] }, // B
   { q: "37- Which character did he play in Carandiru?", a: "d", options: ["King Xerxes", "One of the prisoners", "President Raul Castro", "Oriol"] }, // D
   { q: "38- For which activity is he known besides acting?", a: "b", options: ["Playing soccer", "Cooking", "Singing", "Painting"] }, // B
   { q: "39- How does he spend his free time?", a: "c", options: ["Traveling daily", "Reading, listening to music, meditating", "Sleeping", "Watching movies"] }, // C
   { q: "40- Which role is from Che: Part Two?", a: "c", options: ["Oriol", "King Xerxes", "Bicho de Sete CabeÃ§as character", "Hugh Grant"] }, // C
   { q: "41- Which role is from There Be Dragons?", a: "b", options: ["King Xerxes", "President Raul Castro", "Bicho de Sete CabeÃ§as character", "Oriol"] }, // B
   { q: "42- Which movie shows a young man wrongly kept in a mental hospital?", a: "a", options: ["Carandiru", "Bicho de Sete CabeÃ§as", "300", "Love Actually"] }, // A
   { q: "43- Which award did he win at Cartagena Film Festival?", a: "c", options: ["Best Actor", "Best Director", "Best Villain", "Best Supporting Actor"] }, // C
   { q: "44- What activity did he do with Louis Figo and Alan Shearer?", a: "b", options: ["Played soccer", "Watched a movie", "Acted in a film", "Sang"] }, // B
   { q: "45- How does he manage his workload?", a: "b", options: ["Sleeping", "Reading, music, meditation", "Traveling", "Cooking"] }, // B
   { q: "46- Which film in 2001 was his first big role?", a: "c", options: ["Carandiru", "Bicho de Sete CabeÃ§as", "Love Actually", "300"] }, // C
   { q: "47- Rodrigo Santoro starred in which genre initially?", a: "c", options: ["Hollywood movies", "Documentaries", "Brazilian soap operas", "Stage plays"] }, // C
   { q: "48- Which movie character earned him MTV Best Villain nomination?", a: "a", options: ["Oriol", "President Raul Castro", "King Xerxes", "Bicho de Sete CabeÃ§as character"] }, // A
   { q: "49- What city is near his birthplace?", a: "a", options: ["SÃ£o Paulo", "Rio de Janeiro", "BrasÃ­lia", "Salvador"] }, // A
   { q: "50- In addition to acting, what else does he love?", a: "c", options: ["Sports", "Cooking", "Painting", "Singing"] } // C
 ];

    
        let currentTFQuestion = 0;
        let tfCorrectAnswers = 0;
        let currentQuestion = 0;
        let correctAnswers = 0;
        let timeLeft = 3600;
        let timerInterval;
        let startTime;
    
      /**
       * 
 * Ø±Ø§Ø¨Ø· Web App (Ø§Ø³ØªØ¨Ø¯Ù„ Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ ID Ù…Ø®ØªÙ„Ù)
 */


 
const CHECK_URL = "https://script.google.com/macros/s/AKfycbzbt9_nm2qD0x2gwux7LZzMBP-YZn3PVhOVZxRyDhi4SC_KmXrdWQNFYQsnanhZQXY/exec";

/**
 * ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± doGet?action=checkDuplicate
 * ÙŠØ±Ø¬Ø¹ ÙƒØ§Ø¦Ù† { ok: true } Ø£Ùˆ { ok: false, message: "..." }
 */


 
async function checkDuplicate(name, phone, quizName) {
  const url = `${CHECK_URL}?action=checkDuplicate&name=${encodeURIComponent(name)}&phone=${encodeURIComponent(phone)}&quizName=${encodeURIComponent(quizName)}`;
  console.log("Checking URL:", url);

  try {
    const res = await fetch(url, { method: 'GET', cache: 'no-store' });
    console.log("Fetch response:", res);

    if (!res.ok) {
      return { ok: false, message: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ (HTTP ' + res.status + ')' };
    }

    const data = await res.json();
    console.log("Data from server:", data);

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹ØªØ§Ø¯
    if (data.status === 'duplicate') return { ok: false, message: data.message };

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¢Ø®Ø± ØµÙ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 1
    if (data.status === 'lastRow1') {
      return { ok: false, message: data.message };
    }

    if (data.status === 'ok') return { ok: true };

    return { ok: false, message: data.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±.' };

  } catch (err) {
    console.error("checkDuplicate error:", err);
    return { ok: false, message: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.' };
  }
}


// ========== Ø¯Ø§Ù„Ø© ØªÙˆÙ„ÙŠØ¯ ÙƒÙ„Ù…Ø© Ø³Ø± ÙŠÙˆÙ…ÙŠØ© (Ø«Ø§Ø¨ØªØ© Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…) ==========
function getDailyPassword() {
  const today = new Date();
  const day = today.getDate();
  const month = today.getMonth() + 1;
  const year = today.getFullYear();

  // ØªÙˆÙ„ÙŠØ¯ Ù‚ÙŠÙ…Ø© ÙŠÙˆÙ…ÙŠØ© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØµÙŠØºØ© Ù„Ùˆ Ø­Ø¨ÙŠØª Ø£Ù…Ù†Ù‡Ø§ Ø£ÙƒØ«Ø±)
  const seed = (day * 7 + month * 13 + year) % 10000;
  return (1000 + seed).toString(); // Ù…Ø«Ø§Ù„: Ø±Ù‚Ù… Ù…Ù† 4 Ø®Ø§Ù†Ø§Øª Ø«Ø§Ø¨Øª Ø§Ù„ÙŠÙˆÙ…
}




// ==================== Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆÙŠØ² Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ====================
async function fetchQuizStatus() {
  try {
    const res = await fetch(CHECK_URL + "?action=getQuizStatus");
    const data = await res.json();
    const quizDisabled = data.status == 1;

    const startBtn = document.getElementById("startBtn");
    const adminText = document.getElementById("adminText");
    const adminMsg = document.getElementById("adminMsg");

    if (quizDisabled) {
      startBtn.disabled = true;
      startBtn.innerText = "âŒ Quiz Disabled by Admin";
      adminText.innerText = "âŒ Quiz Disabled by Admin";
      adminMsg.innerHTML = "âš ï¸ Quiz has been disabled!";
      adminMsg.style.color = "#ffff66";
    } else {
      startBtn.disabled = false;
      startBtn.innerText = "Start Quiz";
      adminText.innerText = "ğŸ”’ Admin Control";
      adminMsg.innerHTML = "âœ… Quiz has been enabled!";
      adminMsg.style.color = "#66ff66";
    }
  } catch (err) {
    console.error("Error fetching quiz status:", err);
  }
}

// ==================== Ø²Ø± Admin Control ====================
async function toggleQuiz() {
  const startBtn = document.getElementById("startBtn");
  const adminText = document.getElementById("adminText");
  const adminMsg = document.getElementById("adminMsg");

  let quizDisabled = startBtn.disabled; // Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
  quizDisabled = !quizDisabled; // Ù‚Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  if(quizDisabled){
    startBtn.disabled = true;
    startBtn.innerText = "âŒ Quiz Disabled by Admin";
    adminText.innerText = "âŒ Quiz Disabled by Admin";
    adminMsg.innerHTML = "âš ï¸ Quiz has been disabled!";
    adminMsg.style.color = "#ffff66";
  } else {
    startBtn.disabled = false;
    startBtn.innerText = "Start Quiz";
    adminText.innerText = "ğŸ”’ Admin Control";
    adminMsg.innerHTML = "âœ… Quiz has been enabled!";
    adminMsg.style.color = "#66ff66";
  }

  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù€ Google Sheet
  try {
    await fetch(CHECK_URL + "?action=updateStatus", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({ status: quizDisabled ? "1" : "0" })
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ù„ØªØ£ÙƒÙŠØ¯
    fetchQuizStatus();
  } catch (err) {
    console.error("Error updating quiz status:", err);
  }
}

// ==================== startQuiz ====================
async function startQuiz(event) {
  const startBtn = document.getElementById("startBtn");
  if (startBtn.disabled) {
    alert("âš ï¸ Ø§Ù„ÙƒÙˆÙŠØ² Ù…Ø¹Ø·Ù„ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù† Ø­Ø§Ù„ÙŠØ§Ù‹.");
    return;
  }

  // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„
  let name = document.getElementById("traineeName").value.trim();
  let phone = document.getElementById("traineePhone").value.trim();
  let traineeCode = document.getElementById("traineeCode").value.trim();
  let password = document.getElementById("password").value;
  let course = document.getElementById("courseName").value.trim();
  let quizTitle = document.getElementById("quizTitle");

  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙØ± Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ† Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯
  if (phone.startsWith('0')) {
      phone = phone.substring(1);
  }

  // ØªØ­Ù‚Ù‚ Ù…Ø­Ù„ÙŠ Ø³Ø±ÙŠØ¹
  if (!name) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…."); return; }
  if (!phone) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†."); return; }
  if (!traineeCode) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ."); return; }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†
  const passwordDisabled = localStorage.getItem("passwordDisabled") === "true";

  // ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ù„Ùˆ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ØºÙŠØ± Ù…Ø¹Ø·Ù„)
  const dailyPassword = getDailyPassword();
if (!passwordDisabled && password !== dailyPassword) {
  const errorBox = document.getElementById("errorBox");
  if (errorBox) {
    errorBox.innerHTML = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©<br>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­.";
    errorBox.style.display = "block";

    setTimeout(() => {
      errorBox.style.display = "none";
    }, 4000);
  } else {
    alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø©.");
  }
  return;
}


  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ ÙˆØªØ¹Ø·ÙŠÙ„Ù‡
  const startButton = event && event.currentTarget ? event.currentTarget : document.querySelector('.btn');
  let prevText = startButton ? startButton.innerText : "Start Quiz";

if (startButton) {
    startButton.disabled = true;

    //  Ø³Ø§Ø¹Ø© Ø±Ù…Ù„ÙŠØ© Ù…ØªØ­Ø±ÙƒØ©
    const frames = ["â³ Checking...", "âŒ› Checking..."];
    let i = 0;

    startButton.innerText = frames[i];

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
    const interval = setInterval(() => {
        i = (i + 1) % frames.length;
        startButton.innerText = frames[i];
    }, 600); // ØªØºÙŠÙŠØ± ÙƒÙ„ 0.6 Ø«Ø§Ù†ÙŠØ©

    // Ø­ÙØ¸ Ø§Ù„Ù€ interval Ø¯Ø§Ø®Ù„ Ø§Ù„Ø²Ø± Ø¹Ø´Ø§Ù† Ù†ÙˆÙ‚ÙÙ‡ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚
    startButton.dataset.loadingInterval = interval;
}


  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
  const quizName = course || "Unknown";
  let check;
  try {
    check = await checkDuplicate(name, phone, quizName);
    console.log("Data from server:", check);
  } catch (err) {
    console.error(err);
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.");
    if (startButton) {
      startButton.disabled = false;
      startButton.innerText = prevText;
    }
    return;
  }

  // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²Ø± Ù„ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
  if (startButton) {
    startButton.disabled = false;
    startButton.innerText = prevText;
  }

  // Ù…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙƒØ±Ø±
  if (!check.ok) {
    showDuplicateMessage(check.message);
    return;
  }

  // Ù„Ùˆ ÙƒÙ„ Ø´ÙŠØ¡ ØªÙ…Ø§Ù…: Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
  quizTitle.textContent = course || "(A2)";
  window.traineeData = { name, phone, traineeCode, course };

  document.getElementById("startScreen").style.display = "none";
  document.getElementById("quizContainer").style.display = "block";

  startTime = new Date();
  startTimer();
  loadTFQuestion();

  // ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
  let elem = document.documentElement;
  if (elem.requestFullscreen) { elem.requestFullscreen(); }
  else if (elem.mozRequestFullScreen) { elem.mozRequestFullScreen(); }
  else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
  else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
}

    
function showDuplicateMessage(message) {
    const msgBox = document.getElementById("duplicateMessage");
    const msgText = document.getElementById("duplicateText");

    msgText.textContent = message || "âŒ ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ù‹Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.";
    msgBox.style.display = "flex";

    // Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
        msgBox.style.display = "none";
    }, 3000);
}



        function startTimer() {
            timerInterval = setInterval(() => {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                document.getElementById("timer").innerText = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showResult();
                }
                timeLeft--;
            }, 1000);
        }
    
      function loadTFQuestion() {
    let quizDiv = document.getElementById("quiz");
    let passageDiv = document.getElementById("passage");

    if (currentTFQuestion < trueFalseQuestions.length) {
        let q = trueFalseQuestions[currentTFQuestion];

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø·Ø¹
        passageDiv.innerHTML = `
            <h3>Read the following passage carefully and answer the question:</h3>
            <p style="font-size: 22px;">${q.passage}</p>
        `;

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª
        let questionHTML = `<p class='question'><strong>${currentTFQuestion + 1}- ${q.q}</strong></p>`;

        q.options.forEach((option, index) => {
    const letter = String.fromCharCode(97 + index); // "a", "b", ...
    questionHTML += `
        <label>
            <input type='radio' name='answer' value='${letter}'>
            ${option}
        </label><br>
    `;
});

        questionHTML += `<button class='btn' onclick='nextTFQuestion()'>Next</button>`;
        quizDiv.innerHTML = questionHTML;
    } else {
        // Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        document.getElementById("passage").style.display = "none";
        quizDiv.innerHTML = "<p>You've finished all reading questions.</p>";
        loadQuestion(); // Ù„Ùˆ ÙÙŠÙ‡ Ù…Ø±Ø­Ù„Ø© ØªØ§Ù†ÙŠØ©
    }
}

    
  function nextTFQuestion() {
  const selectedAnswer = document.querySelector("input[name='answer']:checked");
  if (!selectedAnswer) {
    alert("Please select an answer");
    return;
  }

  const q = trueFalseQuestions[currentTFQuestion];
  const selectedValue = selectedAnswer.value;

  const isAnswerKeyALetter = q.a.length === 1 && ["a", "b", "c", "d"].includes(q.a.toLowerCase());

  if (isAnswerKeyALetter) {
    if (selectedValue === q.a.toLowerCase()) {
      tfCorrectAnswers++; // âœ… ØµØ­Ø­ Ù‡Ù†Ø§ Ø¨Ø¯Ù„ score
    }
  } else {
    const selectedOptionIndex = selectedValue.charCodeAt(0) - 97;
    const selectedOptionText = q.options[selectedOptionIndex];

    if (selectedOptionText.trim().toLowerCase() === q.a.trim().toLowerCase()) {
      tfCorrectAnswers++; // âœ… ØµØ­Ø­ Ù‡Ù†Ø§ Ø¨Ø¯Ù„ score
    }
  }

  currentTFQuestion++;
  loadTFQuestion();
}




        function loadQuestion() {
            let quizDiv = document.getElementById("quiz");
            let q = questions[currentQuestion];
            quizDiv.innerHTML = `<p class='question'>${q.q}</p>` +
                q.options.map((option, index) => `<label><input type='radio' name='answer' value='${String.fromCharCode(97 + index)}'> ${option}</label>`).join('') +
                `<button class='btn' onclick='nextQuestion()'>${currentQuestion === questions.length - 1 ? "Finish" : "Next"}</button>`;
        }
    
        function nextQuestion() {
            let selectedAnswer = document.querySelector("input[name='answer']:checked");
            if (!selectedAnswer) return;
            if (selectedAnswer.value === questions[currentQuestion].a) {
                correctAnswers++;
            }
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                showResult();
            }
        }
    
let serverUrl = ""; // Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©

// Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ GitHub
function fetchServerUrl() {
fetch("https://raw.githubusercontent.com/etiqotwf/liveServer1/main/serverUrl.json")
        .then(response => response.json())
        .then(data => {
            if (data.serverUrl) {
                serverUrl = data.serverUrl;
                console.log("âœ… Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ø¯Ø« Ù…Ù† GitHub:", serverUrl);
            } else {
                console.error("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.");
                retryFetchServerUrl();
            }
        })
        .catch(error => {
            console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ù† GitHub:", error);
            retryFetchServerUrl();
        });
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
function retryFetchServerUrl() {
    if (retryCount < MAX_RETRIES) {
        retryCount++;
        console.log(`ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (${retryCount}/${MAX_RETRIES}) Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù...`);
        setTimeout(fetchServerUrl, 3000);
    } else {
        console.error("â›” ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±.");
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
fetchServerUrl();
function showResult() {
    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª
    clearInterval(timerInterval);

    // âœ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ Ù…Ù† window (Ø¹Ø´Ø§Ù† Ù…ÙŠØ¸Ù‡Ø±Ø´ undefined)
    const traineeData = window.traineeData || {};

    // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚
    let endTime = new Date();
    let timeTaken = Math.floor((endTime - startTime) / 1000);
    let minutesTaken = Math.floor(timeTaken / 60);
    let secondsTaken = timeTaken % 60;

    // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
    let name = traineeData.name || document.getElementById("traineeName").value || "Unknown";
    let phone = traineeData.phone || document.getElementById("traineePhone").value || "Unknown";
    let traineeCode = traineeData.traineeCode || document.getElementById("traineeCode").value || "Unknown";
    let date = new Date().toLocaleDateString("en-US");
    let course = traineeData.course || document.getElementById("courseName").value || "Unknown";

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
    let totalQuestions = trueFalseQuestions.length + questions.length;
    let totalCorrectAnswers = tfCorrectAnswers + correctAnswers;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†ØªÙŠØ¬Ø©
    let resultData = {
        name,
        phone,
        traineeCode,
        date,
        course,
        startTime: startTime.toLocaleString("en-GB", {
            timeZone: "Africa/Cairo",
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "numeric",
            minute: "numeric",
            second: "numeric",
            hour12: true
        }),
        timeTaken: `${minutesTaken} min ${secondsTaken} sec`,
        score: `${totalCorrectAnswers} / ${totalQuestions}`
    };

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± Ø¥Ø°Ø§ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·
    if (!serverUrl) {
        console.log("â³ Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±...");
        fetchServerUrl().then(() => {
            if (serverUrl) sendDataToServer(resultData);
            else {
                console.error("âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø¹Ø¯.");
                alert("âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.");
            }
        });
    } else sendDataToServer(resultData);

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Sheets
    sendDataToGoogleSheet(resultData);

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    document.getElementById("resultCourse").innerText = course;
    document.getElementById("resultName").innerText = name;
    document.getElementById("resultPhone").innerText = phone;
    document.getElementById("resultCode").innerText = traineeCode; // âœ… Ø§Ù„ÙƒÙˆØ¯ Ù‡ÙŠØ¸Ù‡Ø± ØµØ­ Ø¯Ù„ÙˆÙ‚ØªÙŠ
    document.getElementById("resultDate").innerText = date;
    document.getElementById("resultStartTime").innerText = startTime.toLocaleTimeString();
    document.getElementById("resultTime").innerText = `${minutesTaken} min ${secondsTaken} sec`;
    document.getElementById("resultScore").innerText = `${totalCorrectAnswers} / ${totalQuestions}`;

    // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±
    displayRatingFromNumber(totalCorrectAnswers, totalQuestions);

    // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©
    const title = document.getElementById('resultTitle');
    const scorePercentage = totalCorrectAnswers / totalQuestions;
    if(scorePercentage >= 0.20){
        title.innerText = "ğŸ‰ Congratulations! ğŸ‰";
        launchFireworks();
    } else {
        title.innerText = "ğŸ˜” Better luck next time!";
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    document.getElementById("quizContainer").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";
}


// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
function sendDataToServer(resultData) {
    fetch(`${serverUrl}/submit`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(resultData)
    })
    .then(response => response.json())
    .then(data => console.log("âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ù†Ø¬Ø§Ø­:", data))
    .catch(error => console.error("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±:", error));
}



// ğŸŒŸ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ retry ÙˆØ­ÙØ¸ Ù…Ø­Ù„ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
async function sendDataToGoogleSheet(resultData) {
  const maxRetries = 5; // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
  let attempt = 0;
  let success = false;

  while (!success && attempt < maxRetries) {
    try {
      const formData = new URLSearchParams();
      formData.append("course", resultData.course);
      formData.append("name", resultData.name);
      formData.append("phone", resultData.phone);
      formData.append("date", resultData.date);
      formData.append("startTime", resultData.startTime);
      formData.append("timeTaken", resultData.timeTaken);
      formData.append("score", resultData.score);
      formData.append("traineeCode", resultData.traineeCode);

      const response = await fetch("https://script.google.com/macros/s/AKfycbzbt9_nm2qD0x2gwux7LZzMBP-YZn3PVhOVZxRyDhi4SC_KmXrdWQNFYQsnanhZQXY/exec", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: formData.toString()
      });

      const text = await response.text();
      console.log("âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Google Sheet:", text);
      success = true;

    } catch (error) {
      attempt++;
      console.warn(`Attempt ${attempt} failed:`, error);

      if (attempt >= maxRetries) {
        console.error("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ Ø¹Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠÙ‹Ø§.");
        saveLocally(resultData);
      } else {
        // Ø§Ù†ØªØ¸Ø§Ø± 2 Ø«Ø§Ù†ÙŠØ© Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
        await new Promise(r => setTimeout(r, 2000));
      }
    }
  }
}

// ğŸŒŸ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠÙ‹Ø§ Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ø§Ø­Ù‚Ù‹Ø§
function saveLocally(resultData) {
  let pending = JSON.parse(localStorage.getItem("pendingResults") || "[]");
  pending.push(resultData);
  localStorage.setItem("pendingResults", JSON.stringify(pending));
}

// ğŸŒŸ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ Ø¹ÙˆØ¯Ø© Ø§Ù„Ù†Øª
async function retryPendingResults() {
  let pending = JSON.parse(localStorage.getItem("pendingResults") || "[]");
  if (!pending.length) return;

  for (let i = 0; i < pending.length; i++) {
    try {
      await sendDataToGoogleSheet(pending[i]);
      pending.splice(i, 1);
      i--;
    } catch(e) {
      console.warn("Retry failed for one entry", e);
    }
  }
  localStorage.setItem("pendingResults", JSON.stringify(pending));
}

// ğŸŒŸ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø­Ø§ÙˆÙ„ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
window.addEventListener("load", retryPendingResults);



    </script>
    </body>
</html>
