<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading Comprehension Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 0;
      background: #1e1e2e;
      color: white;
    }

    .container {
      margin-top: 5px;
      width: 95%;
      max-width: 1200px;
      background: #282a36;
      padding: 10px 30px 30px;
      border-radius: 10px;
      box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
      text-align: left;
    }

    h1, h2, p { margin-top: 0; }

    .question {
      font-weight: bold;
      font-size: 30px;
      margin-bottom: 20px;
    }

    .options label {
      display: block;
      padding: 10px;
    }

    .btn {
      background: #ff5555;
      color: white;
      border: none;
      padding: 12px 25px;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 200px;
      font-size: 18px;
      display: block;
    }

    .btn:hover { background: #ff79c6; }

    .result-screen {
      display: none;
      background: #44475a;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 100%;
    }

    #resultScore {
      font-size: 36px;
      font-weight: bold;
      color: #ffffff;
      margin-top: 20px;
    }

    .result-screen p {
      font-size: 20px;
      font-weight: bold;
      color: #f8f8f2;
    }

    #timer {
  font-size: 28px;
  color: #222; /* لون غامق عشان يظهر فوق الخلفية البيضاء */
  font-weight: bold;
  background: rgba(255, 215, 0, 0.2); /* خلفية شفافة ذهبية خفيفة */
  padding: 10px 20px;
  border-radius: 10px;
  width: fit-content;
  margin: 20px auto;
  position: relative;
  z-index: 2;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}


    .author {
      font-size: 30px;
      color: #eb2d0b;
      text-align: center;
      font-weight: bold;
      margin-bottom: 15px;
    }

    label {
      font-size: 22px;
      padding: 10px;
      display: block;
    }

    input[type="radio"] {
      transform: scale(1.5);
      margin-right: 10px;
    }

    #passage { font-size: 16px; font-weight: bold; }

    #startScreen p {
      font-size: 22px;
      font-weight: bold;
    }

    #startScreen input {
      font-size: 20px;
      font-weight: bold;
      padding: 8px;
    }

    #startScreen h1 {
      font-size: 40px;
      font-weight: bold;
      color: #ffd700;
      text-align: center;
      margin-bottom: 20px;
    }

    /* شاشة الأسئلة البيضاء */
    #quizContainer {
      display: none;
      position: relative;
      background: #ffffff;
      color: #000;
      border-radius: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      padding: 40px;
      max-width: 1000px;
      text-align: left;
      overflow: hidden;
    }

    

    /* اللوجو الشفاف في المنتصف */
    #quizContainer::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url('ilc.jpg') center center no-repeat;
      background-size: 60%;
      opacity: 0.2;
      z-index: 0;
    }

    #quizContainer > * { position: relative; z-index: 1; }

    @keyframes fall {
      to { transform: translateY(110vh); opacity: 0.5; }
    }
  </style>
</head>

<body>

  <!-- شاشة البداية -->
  <div class="container" id="startScreen" style="
    max-width: 700px; 
    margin: 60px auto; 
    padding: 40px; 
    background: #ffffff; 
    border-radius: 25px; 
    box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
    text-align: center; 
    font-family: 'Trebuchet MS', sans-serif;
    position: relative;
    overflow: hidden;
  ">
    <h1 style="color:#0056b3; font-size: 40px; margin-bottom: 20px;">
      🤖 The British International Learning Center (ILC)
    </h1>
    <h2 style="font-size: 26px; color:#444; margin-bottom: 30px;">✨ AI-Powered Training Portal ✨</h2>

    <p style="font-size: 20px;">
      📘 Course Name: 
      <input type="text" id="courseName" value="FinalElementaryTest" readonly 
        style="font: size 25px;; padding:12px; width:60%; border:none; border-radius:8px; background:#f0f0f0; text-align:center;">
    </p>

    <p style="font-size: 20px;">
      👤 Enter Your Name: 
      <input type="text" id="traineeName" placeholder="Type your name..." 
        style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center;">
    </p>

    <p style="font-size: 20px;">
      📱 Enter Your Phone Number: 
      <input type="text" id="traineePhone" placeholder="Type your phone number..." 
        style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center;">
    </p>

    <p style="font-size: 20px;">
      🔑 Enter Password: 
      <input type="password" id="password" placeholder="Enter password..." 
        style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center;">
    </p>

    <button class="btn" onclick="startQuiz()" style="
      margin-top: 25px; 
      font-size: 22px; 
      padding: 15px 40px; 
      border:none; 
      border-radius:12px; 
      background: linear-gradient(135deg, #007bff, #00d4ff); 
      color:white; 
      cursor:pointer; 
      box-shadow:0 8px 20px rgba(0,0,0,0.2); 
      transition: transform 0.2s;
    " onmouseover="this.style.transform='scale(1.1)'" 
       onmouseout="this.style.transform='scale(1)'">
      🚀 Start Quiz
    </button>

    <p style="margin-top: 40px; font-size: 18px; color: gray;">
      ✍️ Edited by: Ahmed Amer
    </p>


    

    <div id="emojiRain" style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      font-size: 2rem;
    "></div>
  </div>

  <!-- شاشة الأسئلة -->
  <div class="container" id="quizContainer">
    <h2 id="quizTitle">Placement Test</h2>
    <p class="author">📘 The British International Learning Center (ILC)</p>
    <p>Date: <span id="date"></span></p>
     <!-- Emoji Sticky Animation -->
 <div id="emoji-character" style="
    position: sticky;
    top: 10px;
    float: right;
    margin-left: auto;
    display: block;
    z-index: 10;
">
  <img src="ilc.jpg" alt="ILC Logo" style="
      width: 180px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
  ">
</div>

    <p id="timer"> ----- </p>
    <div id="passage">
      <h3>Read the following passage carefully and answer the following questions:</h3>
      <p style="font-size: 22px;"></p>
    </div>
    <div id="quiz"></div>

  
  </div>


  
  <!-- شاشة النتيجة -->
  <div class="result-screen" id="resultScreen">
    <h2>Test Result</h2>
    <p class="author">Created by: Ahmed Amer</p>
    <p><strong>Course Name:</strong> <span id="resultCourse"></span></p>
    <p><strong>Name:</strong> <span id="resultName"></span></p>
    <p><strong>Phone Number:</strong> <span id="resultPhone"></span></p>
    <p><strong>Test Date:</strong> <span id="resultDate"></span></p>
    <p><strong>Start Time:</strong> <span id="resultStartTime"></span></p>
    <p><strong>Time Taken:</strong> <span id="resultTime"></span></p>
    <p><strong>Score:</strong> <span id="resultScore"></span></p>
  </div>

  <script>
    // إيموجي المطر فقط في الشاشة الافتتاحية
    const emojis = ["📝","✏️","📘","📖","⏳","🎯","🏆","📊","👨‍🎓"];
    const container = document.getElementById("emojiRain");
    let rainInterval;

    function createEmoji() {
      const emoji = document.createElement("div");
      emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
      emoji.style.position = "absolute";
      emoji.style.left = Math.random() * 100 + "vw";
      emoji.style.top = "-50px";
      emoji.style.fontSize = "28px";
      emoji.style.animation = `fall ${6 + Math.random() * 3}s linear`;
      container.appendChild(emoji);
      setTimeout(() => emoji.remove(), 2000);
    }

    function startEmojiRain() {
      rainInterval = setInterval(createEmoji, 500);
    }

    function stopEmojiRain() {
      clearInterval(rainInterval);
      container.innerHTML = "";
    }

    startEmojiRain();

    function startQuiz() {
      document.getElementById("startScreen").style.display = "none";
      document.getElementById("quizContainer").style.display = "block";
      stopEmojiRain();
    }
  </script>


  


<script>
    // عند الضغط على أي مكان في الصفحة، أدخل وضع ملء الشاشة
    document.addEventListener("click", () => {
      const elem = document.documentElement; // أو document.getElementById("myForm")
      if (document.fullscreenElement) return; // لا تفعل شيء إذا كنا بالفعل في ملء الشاشة

      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    });
  </script>

    
   <script>
        document.getElementById("date").innerText = new Date().toLocaleDateString("en-US");
    
   const trueFalseQuestions = [
  {
    passage: `Rodrigo Santoro<br>
Rodrigo Santoro was born in 1975 in Petropolis, near Rio de Janeiro, Brazil. As a child, he used to organize puppet performances during family vacations. When he was studying communications in college, he started acting in television soap operas, such as Olho no Olho in 1993 and Hilda Furacao in 1998.
After his success in soap opera, Santoro started acting in Brazilian films. His first big role was in Bicho de Sete Cabeças in 2001. The movie is about a young man who is wrongly kept in a mental hospital. For this role, he won the Best Actor Award at the Cartagena Film Festival. This success led to Hollywood. In 2003, Santoro acted in three movies: Charlie's Angels: Full Throttle, with Drew Barrymore; The Roman Spring of Mrs. Stone, with Helen Mirren, and Love Actually, with Hugh Grant. His performance as King Xerxes of Persia in the movie 300 was nominated as Best Villain at the MTV Movie Awards in 2007.
During this time, Santoro continued working in Brazil. In 2003, he starred in Carandiru, a film about a prison in São Paulo. He was nominated as Best Actor at the Prêmio Contigo Cinema for his performance in the 2007 film Não Por Acaso. More recently, he performed the role of President Raul Castro of Cuba in Che: part two (2008) and that of Oriol in There Be Dragons (2011).
With this heavy workload, Santoro balances his life in Rio de Janeiro by reading, listening to music, and meditating. He also loves sports. In 2008, he played soccer with such international stars as Louis Figo and Alan Shearer for Soccer Aid, a charity that raises money for the United Nations Children's Fund (UNICEF).`,
    q: "Rodrigo Santoro studied acting in college.",
    a: "False", // B
    options: ["True", "False"]
  },
  {
    passage: `Rodrigo Santoro<br>
...same passage as above...`,
    q: "He won an award for his role in Bicho de Sete Cabeças.",
    a: "True", // A
    options: ["True", "False"]
  },
  {
    passage: `Rodrigo Santoro<br>
...same passage as above...`,
    q: "He worked in Brazil before he worked in Hollywood.",
    a: "False", // B (لتوافق إجابة المدرس)
    options: ["True", "False"]
  },
  {
    passage: `Rodrigo Santoro<br>
...same passage as above...`,
    q: "He won an MTV Movie Award for the role of King Xerxes.",
    a: "False", // B
    options: ["True", "False"]
  },
  {
    passage: `Rodrigo Santoro<br>
...same passage as above...`,
    q: "He always plays very similar roles.",
    a: "True", // A
    options: ["True", "False"]
  },
  {
    passage: `Rodrigo Santoro<br>
...same passage as above...`,
    q: "He once played soccer for a children's charity.",
    a: "False", // B
    options: ["True", "False"]
  }
];

    
const questions = [
  { q: "7- Where was Rodrigo Santoro born?", a: "a", options: ["USA", "Brazil", "Argentina", "Spain"] }, // A
  { q: "8- What year was Rodrigo Santoro born?", a: "a", options: ["1980", "1970", "1975", "1965"] }, // A
  { q: "9- What did he do as a child?", a: "a", options: ["Organized puppet performances", "Played soccer professionally", "Acted in movies", "Sang in a band"] }, // A
  { q: "10- Which course did he study in college?", a: "b", options: ["Medicine", "Engineering", "Law", "Communications"] }, // B
  { q: "11- When did he act in Olho no Olho?", a: "b", options: ["1990", "1995", "1993", "1998"] }, // B
  { q: "12- When did he act in Hilda Furacao?", a: "c", options: ["1993", "1990", "1995", "1998"] }, // C
  { q: "13- Which movie gave him his first big role?", a: "a", options: ["Carandiru", "Bicho de Sete Cabeças", "Love Actually", "300"] }, // A
  { q: "14- What award did he win for Bicho de Sete Cabeças?", a: "b", options: ["Best Actor at Cartagena Film Festival", "MTV Movie Award", "Oscar", "Golden Globe"] }, // B
  { q: "15- Which Hollywood movies did he act in 2003?", a: "b", options: ["300, Carandiru, Love Actually", "Bicho de Sete Cabeças, Che: Part Two", "Charlie's Angels, The Roman Spring of Mrs. Stone, Love Actually", "Carandiru, Olho no Olho"] }, // B
  { q: "16- Which role got him MTV Best Villain nomination?", a: "b", options: ["President Raul Castro", "Oriol", "King Xerxes in 300", "Himself in a soap opera"] }, // B
  { q: "17- Which Brazilian movie did he star in 2003?", a: "a", options: ["Bicho de Sete Cabeças", "Carandiru", "Love Actually", "There Be Dragons"] }, // A
  { q: "18- In Che: Part Two (2008), which character did he play?", a: "c", options: ["King Xerxes", "Hugh Grant", "President Raul Castro", "Oriol"] }, // C
  { q: "19- In There Be Dragons (2011), which character did he play?", a: "a", options: ["King Xerxes", "President Raul Castro", "Hugh Grant", "Oriol"] }, // A
  { q: "20- How does he balance his busy life in Rio?", a: "b", options: ["By traveling frequently", "Reading, listening to music, and meditating", "By acting nonstop", "By doing nothing"] }, // B
  { q: "21- Which sport did he play for charity in 2008?", a: "c", options: ["Soccer", "Basketball", "Tennis", "Volleyball"] }, // C
  { q: "22- Which charity benefits from Soccer Aid?", a: "c", options: ["Red Cross", "UNICEF USA", "UNICEF", "World Food Program"] }, // C
  { q: "23- Which international stars did he play with for Soccer Aid?", a: "c", options: ["Louis Figo and Alan Shearer", "Drew Barrymore and Hugh Grant", "Helen Mirren and Hugh Grant", "Alan Shearer and Hugh Grant"] }, // C
  { q: "24- What did he organize during family vacations as a child?", a: "a", options: ["Puppet performances", "Soccer games", "Cooking contests", "Music shows"] }, // A
  { q: "25- In which soap opera did he act in 1998?", a: "b", options: ["Olho no Olho", "Carandiru", "Bicho de Sete Cabeças", "Hilda Furacao"] }, // B
  { q: "26- Which of these films is a mental hospital story?", a: "c", options: ["Love Actually", "Bicho de Sete Cabeças", "300", "Carandiru"] }, // C
  { q: "27- Which role in 300 made him famous internationally?", a: "d", options: ["Love Actually character", "Carandiru character", "King Xerxes", "President Raul Castro"] }, // D
  { q: "28- Where does he live?", a: "b", options: ["São Paulo", "Rio de Janeiro", "Petropolis", "Buenos Aires"] }, // B
  { q: "29- What hobby does he do besides acting?", a: "a", options: ["Painting", "Reading, music, meditation", "Cooking", "Dancing"] }, // A
  { q: "30- When did he start acting in television soap operas?", a: "b", options: ["1990", "1995", "1993", "1998"] }, // B
  { q: "31- Which award nomination did he receive for Não Por Acaso?", a: "c", options: ["MTV Movie Award", "Best Actor at Prêmio Contigo Cinema", "Oscar", "Golden Globe"] }, // C
  { q: "32- Name a Hollywood movie with Drew Barrymore he acted in.", a: "a", options: ["Charlie's Angels: Full Throttle", "Love Actually", "300", "The Roman Spring of Mrs. Stone"] }, // A
  { q: "33- Name a Hollywood movie with Helen Mirren he acted in.", a: "a", options: ["300", "Charlie's Angels: Full Throttle", "Love Actually", "The Roman Spring of Mrs. Stone"] }, // A
  { q: "34- Name a Hollywood movie with Hugh Grant he acted in.", a: "a", options: ["300", "Charlie's Angels: Full Throttle", "Love Actually", "Che: Part Two"] }, // A
  { q: "35- In which year was 300 released?", a: "c", options: ["2003", "2005", "2007", "2008"] }, // C
  { q: "36- Which country is he originally from?", a: "b", options: ["USA", "Brazil", "Spain", "Argentina"] }, // B
  { q: "37- Which character did he play in Carandiru?", a: "d", options: ["King Xerxes", "One of the prisoners", "President Raul Castro", "Oriol"] }, // D
  { q: "38- For which activity is he known besides acting?", a: "b", options: ["Playing soccer", "Cooking", "Singing", "Painting"] }, // B
  { q: "39- How does he spend his free time?", a: "c", options: ["Traveling daily", "Reading, listening to music, meditating", "Sleeping", "Watching movies"] }, // C
  { q: "40- Which role is from Che: Part Two?", a: "c", options: ["Oriol", "King Xerxes", "Bicho de Sete Cabeças character", "Hugh Grant"] }, // C
  { q: "41- Which role is from There Be Dragons?", a: "b", options: ["King Xerxes", "President Raul Castro", "Bicho de Sete Cabeças character", "Oriol"] }, // B
  { q: "42- Which movie shows a young man wrongly kept in a mental hospital?", a: "a", options: ["Carandiru", "Bicho de Sete Cabeças", "300", "Love Actually"] }, // A
  { q: "43- Which award did he win at Cartagena Film Festival?", a: "c", options: ["Best Actor", "Best Director", "Best Villain", "Best Supporting Actor"] }, // C
  { q: "44- What activity did he do with Louis Figo and Alan Shearer?", a: "b", options: ["Played soccer", "Watched a movie", "Acted in a film", "Sang"] }, // B
  { q: "45- How does he manage his workload?", a: "b", options: ["Sleeping", "Reading, music, meditation", "Traveling", "Cooking"] }, // B
  { q: "46- Which film in 2001 was his first big role?", a: "c", options: ["Carandiru", "Bicho de Sete Cabeças", "Love Actually", "300"] }, // C
  { q: "47- Rodrigo Santoro starred in which genre initially?", a: "c", options: ["Hollywood movies", "Documentaries", "Brazilian soap operas", "Stage plays"] }, // C
  { q: "48- Which movie character earned him MTV Best Villain nomination?", a: "a", options: ["Oriol", "President Raul Castro", "King Xerxes", "Bicho de Sete Cabeças character"] }, // A
  { q: "49- What city is near his birthplace?", a: "a", options: ["São Paulo", "Rio de Janeiro", "Brasília", "Salvador"] }, // A
  { q: "50- In addition to acting, what else does he love?", a: "c", options: ["Sports", "Cooking", "Painting", "Singing"] } // C
];



    
        let currentTFQuestion = 0;
        let tfCorrectAnswers = 0;
        let currentQuestion = 0;
        let correctAnswers = 0;
        let timeLeft = 3600;
        let timerInterval;
        let startTime;
    
        function startQuiz() {
    let name = document.getElementById("traineeName").value.trim();
    let phone = document.getElementById("traineePhone").value.trim();
    let password = document.getElementById("password").value;
    let course = document.getElementById("courseName").value.trim(); // 🆕 قراءة اسم الكورس
    let quizTitle = document.getElementById("quizTitle"); // 🆕 العنوان اللي هيتغير

    if (!name) {
        alert("❗ برجاء إدخال الاسم.");
        return;
    }

    if (!phone) {
        alert("❗ برجاء إدخال رقم التليفون.");
        return;
    }

    if (password !== "1550") {
        alert("❌ كلمة المرور غير صحيحة! الرجاء المحاولة مرة أخرى.");
        return;
    }

    // 🆕 تغيير العنوان بناءً على اسم الكورس
    quizTitle.textContent = course || "FinalElementaryTest";

    document.getElementById("startScreen").style.display = "none";
    document.getElementById("quizContainer").style.display = "block";
    startTime = new Date();
    startTimer();
    loadTFQuestion();

    // تشغيل وضع ملء الشاشة
    let elem = document.documentElement;
    if (elem.requestFullscreen) {
        elem.requestFullscreen();
    } else if (elem.mozRequestFullScreen) {
        elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
    }
}



    
        function startTimer() {
            timerInterval = setInterval(() => {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                document.getElementById("timer").innerText = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showResult();
                }
                timeLeft--;
            }, 1000);
        }
    
      function loadTFQuestion() {
    let quizDiv = document.getElementById("quiz");
    let passageDiv = document.getElementById("passage");

    if (currentTFQuestion < trueFalseQuestions.length) {
        let q = trueFalseQuestions[currentTFQuestion];

        // عرض المقطع
        passageDiv.innerHTML = `
            <h3>Read the following passage carefully and answer the question:</h3>
            <p style="font-size: 22px;">${q.passage}</p>
        `;

        // عرض السؤال والاختيارات
        let questionHTML = `<p class='question'><strong>${currentTFQuestion + 1}- ${q.q}</strong></p>`;

        q.options.forEach((option, index) => {
    const letter = String.fromCharCode(97 + index); // "a", "b", ...
    questionHTML += `
        <label>
            <input type='radio' name='answer' value='${letter}'>
            ${option}
        </label><br>
    `;
});

        questionHTML += `<button class='btn' onclick='nextTFQuestion()'>Next</button>`;
        quizDiv.innerHTML = questionHTML;
    } else {
        // الانتهاء من عرض كل الأسئلة
        document.getElementById("passage").style.display = "none";
        quizDiv.innerHTML = "<p>You've finished all reading questions.</p>";
        loadQuestion(); // لو فيه مرحلة تانية
    }
}

    
  function nextTFQuestion() {
  const selectedAnswer = document.querySelector("input[name='answer']:checked");
  if (!selectedAnswer) {
    alert("Please select an answer");
    return;
  }

  const q = trueFalseQuestions[currentTFQuestion];
  const selectedValue = selectedAnswer.value;

  const isAnswerKeyALetter = q.a.length === 1 && ["a", "b", "c", "d"].includes(q.a.toLowerCase());

  if (isAnswerKeyALetter) {
    if (selectedValue === q.a.toLowerCase()) {
      tfCorrectAnswers++; // ✅ صحح هنا بدل score
    }
  } else {
    const selectedOptionIndex = selectedValue.charCodeAt(0) - 97;
    const selectedOptionText = q.options[selectedOptionIndex];

    if (selectedOptionText.trim().toLowerCase() === q.a.trim().toLowerCase()) {
      tfCorrectAnswers++; // ✅ صحح هنا بدل score
    }
  }

  currentTFQuestion++;
  loadTFQuestion();
}




        function loadQuestion() {
            let quizDiv = document.getElementById("quiz");
            let q = questions[currentQuestion];
            quizDiv.innerHTML = `<p class='question'>${q.q}</p>` +
                q.options.map((option, index) => `<label><input type='radio' name='answer' value='${String.fromCharCode(97 + index)}'> ${option}</label>`).join('') +
                `<button class='btn' onclick='nextQuestion()'>${currentQuestion === questions.length - 1 ? "Finish" : "Next"}</button>`;
        }
    
        function nextQuestion() {
            let selectedAnswer = document.querySelector("input[name='answer']:checked");
            if (!selectedAnswer) return;
            if (selectedAnswer.value === questions[currentQuestion].a) {
                correctAnswers++;
            }
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                showResult();
            }
        }
    
let serverUrl = ""; // سيتم تحديثه تلقائيًا عند تحميل الصفحة

// دالة لجلب رابط السيرفر المخزن في GitHub
function fetchServerUrl() {
fetch("https://raw.githubusercontent.com/etiqotwf/liveServer1/main/serverUrl.json")
        .then(response => response.json())
        .then(data => {
            if (data.serverUrl) {
                serverUrl = data.serverUrl;
                console.log("✅ رابط السيرفر المحدث من GitHub:", serverUrl);
            } else {
                console.error("❌ لم يتم العثور على رابط السيرفر في المستودع.");
                retryFetchServerUrl();
            }
        })
        .catch(error => {
            console.error("❌ خطأ في جلب رابط السيرفر من GitHub:", error);
            retryFetchServerUrl();
        });
}

// دالة لإعادة المحاولة عند الفشل
function retryFetchServerUrl() {
    if (retryCount < MAX_RETRIES) {
        retryCount++;
        console.log(`🔄 إعادة المحاولة (${retryCount}/${MAX_RETRIES}) بعد 3 ثوانٍ...`);
        setTimeout(fetchServerUrl, 3000);
    } else {
        console.error("⛔ تم الوصول إلى الحد الأقصى من المحاولات، تعذر جلب رابط السيرفر.");
    }
}

// تحميل رابط السيرفر عند فتح الصفحة
fetchServerUrl();

function showResult() {
    clearInterval(timerInterval);

    let endTime = new Date();
    let timeTaken = Math.floor((endTime - startTime) / 1000);
    let minutesTaken = Math.floor(timeTaken / 60);
    let secondsTaken = timeTaken % 60;

    let name = document.getElementById("traineeName").value || "Unknown";
    let phone = document.getElementById("traineePhone").value || "Unknown";
    let date = new Date().toLocaleDateString("en-US");
    let course = document.getElementById("courseName").value || "Unknown";

    let totalQuestions = trueFalseQuestions.length + questions.length;
    let totalCorrectAnswers = tfCorrectAnswers + correctAnswers;

    let resultData = {
        name: name,
        phone: phone,
        date: date,
        course: course,
        startTime: startTime.toLocaleString("en-GB", {
            timeZone: "Africa/Cairo",
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "numeric",
            minute: "numeric",
            second: "numeric",
            hour12: true
        }),
        timeTaken: `${minutesTaken} min ${secondsTaken} sec`,
        score: `${totalCorrectAnswers} / ${totalQuestions}`
    };

    // إرسال البيانات إلى السيرفر إذا تم تحميل الرابط
    if (!serverUrl) {
        console.log("⏳ انتظار تحميل رابط السيرفر...");
        fetchServerUrl().then(() => {
            if (serverUrl) {
                sendDataToServer(resultData);
            } else {
                console.error("❌ لم يتم تحميل رابط السيرفر بعد.");
                alert("⚠️ تعذر إرسال البيانات! تأكد من اتصال الإنترنت وأعد المحاولة.");
            }
        });
    } else {
        sendDataToServer(resultData);
    }

    // إرسال البيانات إلى Google Sheets
    sendDataToGoogleSheet(resultData);

    // تحديث واجهة المستخدم
    document.getElementById("resultCourse").innerText = course;
    document.getElementById("resultName").innerText = name;
    document.getElementById("resultPhone").innerText = phone;
    document.getElementById("resultDate").innerText = date;
    document.getElementById("resultStartTime").innerText = startTime.toLocaleTimeString();
    document.getElementById("resultTime").innerText = `${minutesTaken} min ${secondsTaken} sec`;
    document.getElementById("resultScore").innerText = `${totalCorrectAnswers} / ${totalQuestions}`;

    document.getElementById("quizContainer").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";
}

// إرسال البيانات إلى السيرفر الأساسي
function sendDataToServer(resultData) {
    fetch(`${serverUrl}/submit`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(resultData)
    })
    .then(response => response.json())
    .then(data => console.log("✅ تم الإرسال إلى السيرفر بنجاح:", data))
    .catch(error => console.error("❌ خطأ أثناء الإرسال إلى السيرفر:", error));
}





function sendDataToGoogleSheet(resultData) {
    const formData = new URLSearchParams();
    formData.append("course", resultData.course);
    formData.append("name", resultData.name);
    formData.append("phone", resultData.phone);
    formData.append("date", resultData.date);
    formData.append("startTime", resultData.startTime);
    formData.append("timeTaken", resultData.timeTaken);
    formData.append("score", resultData.score);
    formData.append("course", resultData.course);


    fetch("https://script.google.com/macros/s/AKfycbybhyNx3uPAoAjGlvHe_jumSp_NKeOIIwoAPHWOqzUukmlmtoTlE5wF8Y_w17l5m9FS/exec", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
        },
        body: formData.toString(),
    })
    .then(response => response.text())
    .then(responseText => {
        console.log("✅ تم الإرسال إلى Google Sheet:", responseText);
    })
    .catch(error => {
        console.error("❌ خطأ في الإرسال إلى Google Sheet:", error);
    });
}




    </script>
    </body>
</html>
