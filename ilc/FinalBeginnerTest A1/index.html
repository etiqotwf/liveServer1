<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading Comprehension Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 0;
      background: #1e1e2e;
      color: white;
    }

    .container {
      margin-top: 5px;
      width: 95%;
      max-width: 1200px;
      background: #282a36;
      padding: 10px 30px 30px;
      border-radius: 10px;
      box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
      text-align: left;
    }

    h1, h2, p { margin-top: 0; }

    .question {
      font-weight: bold;
      font-size: 30px;
      margin-bottom: 20px;
    }

    .options label {
      display: block;
      padding: 10px;
    }

    .btn {
      background: #ff5555;
      color: white;
      border: none;
      padding: 12px 25px;
      cursor: pointer;
      border-radius: 5px;
      margin-top: 200px;
      font-size: 18px;
      display: block;
    }

    .btn:hover { background: #ff79c6; }

    .result-screen {
      display: none;
      background: #44475a;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      width: 100%;
    }

    #resultScore {
      font-size: 36px;
      font-weight: bold;
      color: #ffffff;
      margin-top: 20px;
    }

    .result-screen p {
      font-size: 20px;
      font-weight: bold;
      color: #f8f8f2;
    }

    #timer {
  font-size: 28px;
  color: #222; /* Ù„ÙˆÙ† ØºØ§Ù…Ù‚ Ø¹Ø´Ø§Ù† ÙŠØ¸Ù‡Ø± ÙÙˆÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
  font-weight: bold;
  background: rgba(255, 215, 0, 0.2); /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ø°Ù‡Ø¨ÙŠØ© Ø®ÙÙŠÙØ© */
  padding: 10px 20px;
  border-radius: 10px;
  width: fit-content;
  margin: 20px auto;
  position: relative;
  z-index: 2;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}


    .author {
      font-size: 30px;
      color: #eb2d0b;
      text-align: center;
      font-weight: bold;
      margin-bottom: 15px;
    }

    label {
      font-size: 22px;
      padding: 10px;
      display: block;
    }

    input[type="radio"] {
      transform: scale(1.5);
      margin-right: 10px;
    }

    #passage { font-size: 16px; font-weight: bold; }

    #startScreen p {
      font-size: 22px;
      font-weight: bold;
    }

    #startScreen input {
      font-size: 20px;
      font-weight: bold;
      padding: 8px;
    }

    #startScreen h1 {
      font-size: 40px;
      font-weight: bold;
      color: #ffd700;
      text-align: center;
      margin-bottom: 20px;
    }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
    #quizContainer {
      display: none;
      position: relative;
      background: #ffffff;
      color: #000;
      border-radius: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      padding: 40px;
      max-width: 1000px;
      text-align: left;
      overflow: hidden;
    }

    

    /* Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø´ÙØ§Ù ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
    #quizContainer::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url('ilc.jpg') center center no-repeat;
      background-size: 60%;
      opacity: 0.2;
      z-index: 0;
    }

    #quizContainer > * { position: relative; z-index: 1; }

    @keyframes fall {
      to { transform: translateY(110vh); opacity: 0.5; }
    }
  </style>
</head>

<body>

<!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø± -->
<div id="duplicateMessage" style="display:none !important; position:fixed; top:20px; left:50%; transform:translateX(-50%);
    background-color:#ff4d4f; color:white; padding:15px 25px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2);
    font-family:Arial, sans-serif; z-index:9999; font-size:16px; display:flex; align-items:center; gap:10px;">
    <span id="duplicateIcon" style="font-size:20px;">âŒ</span>
    <span id="duplicateText">ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ù‹Ø§</span>
</div>



 <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div class="container" id="startScreen" style="
max-width: 700px; 
margin: 60px auto; 
padding: 40px; 
background: #ffffff; 
border-radius: 25px; 
box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
text-align: center; 
font-family: 'Trebuchet MS', sans-serif;
position: relative;
overflow: hidden;
">

<!-- Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
<img src="ilc.jpg" alt="ILC Logo" style="
  position: absolute;
  top: 100px;
  right:40px;
  width: 120px;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0,0,0,0.3);
">

<!-- Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© Ø®Ù„Ù Ø§Ù„Ù†Øµ -->
<img src="ilc.jpg" alt="ILC Logo" style="
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 600px;       /* Ø­Ø¬Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© */
  opacity: 0.1;       /* Ø§Ù„Ø´ÙØ§ÙÙŠØ© */
  pointer-events: none;
  user-select: none;
">

<h1 style="color:#0056b3; font-size:35px; margin-bottom: 20px;">
  ğŸŒ The International British Institute   ğŸŒ
</h1>


<!-- Course Name (ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ ÙˆØ¹Ù„Ù‰ Ø³Ø·Ø± ÙˆØ§Ø­Ø¯) -->
<div style="
  display: flex;
  justify-content: left;
  align-items: center;
  gap: 15px;
  margin: 20px 0;
">
  <label for="courseName" style="
    font-size: 22px;
    font-weight: bold;
    color:#0056b3;
    white-space: nowrap;
  ">
    ğŸ“˜ Course Name:
  </label>

  <input type="text" id="courseName" value="Final(A1)Test" readonly 
    style="
      font-size: 25px;
      padding:12px;
      width:60%;
      border:none;
      border-radius:10px;
      background:#f0f0f0;
      text-align:center;
      color:#000;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    ">
</div>


<!-- Enter Your Name -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ‘¤ Enter Your Name:
  </span>
  <input type="text" id="traineeName" placeholder="Type your name..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Your Phone Number -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ“± Enter Your Phone Number:
  </span>
  <input type="text" id="traineePhone" placeholder="Type your phone number..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Trainee Code -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ§¾ Enter Your Code:
  </span>
  <input type="text" id="traineeCode" placeholder="Enter your code..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Enter Password -->
<p style="font-size: 20px;">
  <span style="color: #0056b3; font-weight: bold;">
    ğŸ”‘ Enter Password:
  </span>
  <input type="password" id="password" placeholder="Enter password..." 
    style="font-size:18px; padding:12px; width:60%; border:1px solid #ccc; border-radius:8px; text-align:center; color:#000;">
</p>

<!-- Ø²Ø± Start Quiz Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ù„Ø§Ù…Ø¹ -->
<!-- Ø²Ø± Start Quiz Ø¨Ø¹Ø¯ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© -->
<div style="text-align: center; margin-top: 10px;">
  <button class="btn" onclick="startQuiz()" style="
    font-size: 22px; 
    padding: 15px 50px; 
    border:none; 
    border-radius:12px; 
    background: linear-gradient(270deg, #ff0055, #ff5500, #ff00ff, #007bff, #00d4ff);
    background-size: 1000% 1000%;
    color:white; 
    cursor:pointer; 
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    animation: gradientMove 4s ease infinite, glowPulse 2s infinite;
    transition: transform 0.2s;
    margin-top: 5px; /* âœ… ØªÙ… ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø²Ø± ÙˆØ§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ */
  " onmouseover="this.style.transform='scale(1.1)'" 
     onmouseout="this.style.transform='scale(1)'">
    <span class="emoji" style="display:inline-block; margin-right:10px; animation: bounce 1s infinite;">ğŸš€</span>
    Start Quiz
  </button>
</div>


<p style="margin-top: 40px; font-size: 18px; color: gray;">
  âœï¸ Edited by: Ahmed Amer
</p>

<!-- Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ù…Ø·Ø± -->
<div id="emojiRain" style="
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  font-size: 2rem;
"></div>
</div>

<style>
@keyframes gradientMove {
0% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
100% { background-position: 0% 50%; }
}

@keyframes glowPulse {
0%, 100% { box-shadow: 0 8px 20px rgba(255, 0, 85, 0.6), 0 0 10px rgba(255, 255, 255, 0.2); }
50% { box-shadow: 0 8px 25px rgba(255, 0, 85, 0.9), 0 0 20px rgba(255, 255, 255, 0.4); }
}

@keyframes bounce {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-8px); }
}
</style>

<script>
const emojis = ["ğŸ“","âœï¸","ğŸ“˜","ğŸ“–","â³","ğŸ¯","ğŸ†","ğŸ“Š","ğŸ‘¨â€ğŸ“"];
const container = document.getElementById("emojiRain");
let rainInterval;

function createEmoji() {
const emoji = document.createElement("div");
emoji.innerText = emojis[Math.floor(Math.random() * emojis.length)];
emoji.style.position = "absolute";
emoji.style.left = Math.random() * 100 + "vw";
emoji.style.top = "-50px";
emoji.style.fontSize = "28px";
emoji.style.animation = `fall ${6 + Math.random() * 3}s linear`;
container.appendChild(emoji);
setTimeout(() => emoji.remove(), 2000);
}

function startEmojiRain() {
rainInterval = setInterval(createEmoji, 500);
}

function stopEmojiRain() {
clearInterval(rainInterval);
container.innerHTML = "";
}

startEmojiRain();

function startQuiz() {
document.getElementById("startScreen").style.display = "none";
stopEmojiRain();
// Ù‡Ù†Ø§ Ø¶Ø¹ Ø£ÙŠ ÙƒÙˆØ¯ Ù„ØªØ¸Ù‡Ø± Ø´Ø§Ø´Ø© Ø§Ù„ÙƒÙˆÙŠØ²
}
</script>


  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
  <div class="container" id="quizContainer">
    <h2 id="quizTitle">Placement Test</h2>
    <p class="author"> ğŸŒ The International British Institute  ğŸŒ 
    <p>Date: <span id="date"></span></p>
     <!-- Emoji Sticky Animation -->
 <div id="emoji-character" style="
    position: sticky;
    top: 10px;
    float: right;
    margin-left: auto;
    display: block;
    z-index: 10;
">
  <img src="ilc.jpg" alt="ILC Logo" style="
      width: 180px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
  ">
</div>

    <p id="timer"> ----- </p>
    <div id="passage">
      <h3>Read the following passage carefully and answer the following questions:</h3>
      <p style="font-size: 22px;"></p>
    </div>
    <div id="quiz"></div>

  
  </div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div class="result-screen" id="resultScreen" style="
display:none;
background: #0056b3; /* Ø®Ù„ÙÙŠØ© ÙÙˆØ±Ù…Ø§Ù„ Ø£Ø²Ø±Ù‚ Ø«Ø§Ø¨Øª */
padding: 40px;
border-radius: 25px;
text-align: center;
color: #fff;
position: relative;
font-family: 'Arial', sans-serif;
max-width: 800px;
margin: 40px auto;
box-shadow: 0 0 20px rgba(0,0,0,0.4);
border: 3px solid #ffd700; /* Ø¨ÙˆØ±Ø¯Ø± Ø°Ù‡Ø¨ÙŠ Ø£Ù†ÙŠÙ‚ */
overflow: hidden;
">

<h1 id="resultTitle" style="font-size: 46px; margin-bottom: 25px; font-weight:bold;"></h1>

<p style="font-size: 30px; margin: 12px 0;">
  ğŸ“˜ <strong>Course Name:</strong> <span id="resultCourse"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  ğŸ‘¤ <strong>Name:</strong> <span id="resultName"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  ğŸ“± <strong>Phone Number:</strong> <span id="resultPhone"></span>
</p>

<p style="font-size: 28px; margin: 12px 0;">
  ğŸ†” <strong>Code:</strong> <span id="resultCode"></span>
</p>


<p style="font-size: 28px; margin: 12px 0;">
  ğŸ“… <strong>Test Date:</strong> <span id="resultDate"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  â° <strong>Start Time:</strong> <span id="resultStartTime"></span>
</p>
<p style="font-size: 28px; margin: 12px 0;">
  â±ï¸ <strong>Time Taken:</strong> <span id="resultTime"></span>
</p>

<!-- Score & Rating (Ø§Ù„Ø³ÙƒÙˆØ± Ù…Ø®ÙÙŠ Ù„ÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ø´Ø§Ù† Ø§Ù„ÙƒÙˆØ¯ Ù…Ø§ ÙŠÙ‚Ø¹Ø´) -->
<p style="font-size: 32px; font-weight: bold; color: #ffd700; margin-top: 25px;">
  <span id="resultScore" style="display:none;"></span>
  ğŸ† Grade: <span id="resultRating"></span>
</p>




<a href="https://docs.google.com/forms/d/e/1FAIpQLSdO8aYvcG_LM3mYIdLPWDdh2p88VGIYab8XBJFWFsKTWOvLcw/viewform" target="_blank" style="
  display:block;
  margin-top: 30px;
  font-size:28px;
  font-weight:bold;
  color:#fff;
  text-decoration: underline;
">
  ğŸ“ Click here to request your certificate
</a>

<!-- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ© -->
<div id="fireworks" style="
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
"></div>
</div>

<style>
/* Score Ùˆ Rating Ø£Ù„ÙˆØ§Ù† Ø°Ù‡Ø¨ÙŠØ© Ø«Ø§Ø¨ØªØ© */
#resultScore, #resultRating {
  background: none !important;
  -webkit-background-clip: none !important;
  -webkit-text-fill-color: #ffd700; /* Ø°Ù‡Ø¨ÙŠ */
  animation: none !important;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© */
.result-screen p {
  font-family: 'Arial', sans-serif;
  line-height: 1.6;
}

/* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø±Ø§Ø¨Ø· */
.result-screen a:hover {
  color: #ffd700;
}

/* Ø­Ø±ÙƒØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ© */
@keyframes fireworkFall {
  0% { transform: translateY(0) scale(1); opacity:1; }
  100% { transform: translateY(-100px) scale(0.5); opacity:0; }
}
</style>

<script>
// Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
let traineeData = {
  course: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
  name: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
  phone: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"
};

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
function setTraineeData(course, name, phone) {
  traineeData.course = course || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  traineeData.name = name || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  traineeData.phone = phone || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
}

// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¬Ø©
function calculateRating(score, maxScore) {
  if (score === undefined || maxScore === undefined) return "ØºÙŠØ± Ù…Ø­Ø¯Ø¯ â“";

  // Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø­Ø³Ø¨ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³
  if (score >= 0 && score < 10) return "Pass âœ…";
  else if (score >= 10 && score < 20) return "Good ğŸ™‚";
  else if (score >= 20 && score < 30) return "Very Good ğŸ‘";
  else if (score >= 30 && score <= maxScore) return "Excellent ğŸŒŸ";
  else return "ØºÙŠØ± Ù…Ø­Ø¯Ø¯ â“";
}


// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ø±Ù‚Ù…
function displayRatingFromNumber(score, maxScore) {
  const ratingEl = document.getElementById("resultRating");
  if (!ratingEl) return;
  const rating = calculateRating(score, maxScore);
  ratingEl.innerText = rating;
}

// Ø¯Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©
function launchFireworks() {
  const fireworks = document.getElementById('fireworks');
  for(let i=0;i<50;i++){
    const emoji = document.createElement('div');
    emoji.innerText = "ğŸ†";
    emoji.style.position = "absolute";
    emoji.style.left = Math.random()*100 + "%";
    emoji.style.top = Math.random()*100 + "%";
    emoji.style.fontSize = (20 + Math.random()*30) + "px";
    emoji.style.animation = `fireworkFall ${2+Math.random()*2}s linear forwards`;
    fireworks.appendChild(emoji);
    setTimeout(()=> emoji.remove(), 4000);
  }
}


</script>



<script>
    // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„ØµÙØ­Ø©ØŒ Ø£Ø¯Ø®Ù„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
    document.addEventListener("click", () => {
      const elem = document.documentElement; // Ø£Ùˆ document.getElementById("myForm")
      if (document.fullscreenElement) return; // Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¡ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©

      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    });
  </script>

    
   <script>
        document.getElementById("date").innerText = new Date().toLocaleDateString("en-US");
    
   const trueFalseQuestions = [
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In the United States, very few students live in university housing.",
    a: "False",
    options: ["True", "False"]
  },
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In the United States, some young adults share apartments with roommates.",
    a: "True",
    options: ["True", "False"]
  },
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In the United States, nearly all young adults live with their parents.",
    a: "False",
    options: ["True", "False"]
  },
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In Hong Kong, not many university students live with their parents.",
    a: "False",
    options: ["True", "False"]
  },
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In Hong Kong, few young people live alone.",
    a: "True",
    options: ["True", "False"]
  },
  {
    passage: `Leaving Home<br>
Young people leave their parents' homes at different ages in different parts of the world. In the United States, a lot of college students do not live at home. They often choose to go to college in different cities â€“ away from their parents. At college, many live in university housing. After college, most people prefer to live in their own homes. They often live alone, but some people rent apartments with others. These people are called roommates.
By the age of 22, few young people in the United States live with their parents. Families stay together longer in many Asian countries and cities. In Hong Kong, for example, nearly all university students live with their parents. Rents in the city are very expensive, and few students have the money to pay for their own apartments. Very few young people live alone or become roommates in a shared apartment. Many young people in Hong Kong continue to live with their parents even after they marry.`,
    q: " In Hong Kong, most young married couples have enough money to live in their own apartments.",
    a: "False",
    options: ["True", "False"]
  }
];

    
const questions = [
  { q: "7- Who -----------------------the men over there, Amy?", a: "c", options: ["am", "is", "are", "was"] },
  { q: "8- A: My name is Young-hoon. B: -----------------------------", a: "a", options: ["Nice to meet you, Young-hoon", "Let's go and say hello", "It's too expensive", "I can't afford that"] },
  { q: "9- That's Ji-Won. ------------------is in my class.", a: "a", options: ["He", "His", "We", "Her"] },
  { q: "10- A: Hello. I'm a new club member. B: -----------------------------", a: "b", options: ["Thanks", "Welcome", "Goodbye", "Not at all"] },
  { q: "11- I'm a --------------------------. I work in an office. I like computers a lot.", a: "b", options: ["fitness instructor", "website designer", "flight attendant", "tour guide"] },
  { q: "12- What do you ---------------?", a: "d", options: ["doing", "does", "did", "do"] },
  { q: "13- I'm a student. I ------------architecture.", a: "a", options: ["study", "studying", "studies", "has studied"] },
  { q: "14- Eyad works for ---------------Construction Company.", a: "c", options: ["the", "an", "a", "no article"] },
  { q: "15- -----------Saturdays and Sundays, Pat sleeps most of the day and wakes up a little late.", a: "d", options: ["In", "Until", "At", "On"] },
  { q: "16- Lauren --------------------work at 5:00 p.m.", a: "b", options: ["answers", "starts", "goes", "writes"] },
  { q: "17- ------------size do you want to try?", a: "c", options: ["Where", "When", "What", "Who"] },
  { q: "18- How much is ----------------backpack?", a: "a", options: ["this", "these", "those", "then"] },
  { q: "19- You mean the green ones, -------------------$34.", a: "b", options: ["It's", "They're", "We're", "He's"] },
  { q: "20- The leather gloves are ------------than the woolen ones.", a: "c", options: ["nice", "nicest", "nicer", "more than"] },
  { q: "21- The knife is made ---------------------diamonds.", a: "b", options: ["from", "of", "into", "off"] },
  { q: "22- A: Do you like country music?  B: -------------------------------------", a: "a", options: ["I can't stand it", "I can't stand them", "It's out of my hand", "It's well-cooked"] },
  { q: "23- I love the daughter of my brother as she is my favorite ------------------", a: "b", options: ["nephew", "niece", "widower", "aunt"] },
  { q: "24- Very ---------------students live in university housing.", a: "d", options: ["much", "little", "less", "few"] },
  { q: "25- In my country, some ----------------get married fairly young.", a: "a", options: ["couples", "cousins", "relatives", "person"] },
  { q: "26- I almost never -----------------bicycling.", a: "c", options: ["play", "do", "go", "give"] },
  { q: "27- Do you also play sports -----------------your free time?", a: "b", options: ["at", "in", "until", "from"] },
  { q: "28- Pierre never -------------------. He's a real couch potato.", a: "b", options: ["arises", "exercises", "absorbs", "sterilizes"] },
  { q: "29- A: How often do you go swimming, Linda? B: ------------------------------------", a: "b", options: ["I guess I'm ok.", "Once a week", "About an hour.", "No one knows"] },
  { q: "30- Philip tries to keep fit. He wants to stay in ------------------", a: "c", options: ["form", "model", "shape", "bait"] },
  { q: "31- I'd prefer to ----------------my homework in the evening.", a: "b", options: ["make", "do", "give", "have"] },
  { q: "32- He was ---------------------last week. He spent all his money.", a: "b", options: ["break", "broke", "broken", "breaking"] },
  { q: "33- He didn't work ---------------Friday. He took a day off.", a: "b", options: ["in", "on", "at", "of"] },
  { q: "34- My friend spent two hours ------------------the newest movie online.", a: "d", options: ["watch", "watched", "to watch", "watching"] },
  { q: "35- We didn't have time to visit any ------------------ temples.", a: "a", options: ["other", "another", "others", "rather"] },
  { q: "36- What's your neighborhood -------------------?", a: "b", options: ["alike", "like", "likely", "liked"] },
  { q: "37- I'm sorry I was late. I had to ----------------a phone call.", a: "b", options: ["do", "make", "go", "get"] },
  { q: "38- My friends and I really enjoyed your party. We all had a -----------------time.", a: "b", options: ["boring", "good", "funny", "dull"] },
  { q: "39- I stayed home last night and -------------------the laundry.", a: "a", options: ["did", "went", "made", "shot"] },
  { q: "40- We didn't see very much in the mountains. The weather was pretty --------------------------", a: "b", options: ["cool", "foggy", "sunny", "clear"] },
  { q: "41- I worked really hard in Switzerland last week. I was there -----------------------.", a: "b", options: ["in my car", "on business", "on vacation", "by yacht"] },
  { q: "42- I had my hair cut at the -------------------", a: "b", options: ["butcher's", "barber's", "greengrocer's", "banker's"] },
  { q: "43- There is one ----------to the grocery store on 1st Avenue.", a: "d", options: ["between", "in front", "opposite", "next"] },
  { q: "44- How much noise ---------------------there?", a: "a", options: ["is", "are", "has", "have"] },
  { q: "45- I'm going to the stationery store to get a ---------------------------", a: "a", options: ["birthday card", "coffee", "food", "ointment"] },
  { q: "46- We're taking a long drive. We need to go to the ----------------------", a: "b", options: ["Laundromat", "gas station", "travel agency", "carpenter workshop"] },
  { q: "47- I live on the 8th floor of my -----------------------------", a: "a", options: ["apartment building", "neighborhood", "theater", "aquarium"] },
  { q: "48- Our apartment is in the center of the city. We live ----------------------------", a: "a", options: ["downtown", "in the neighborhood", "in the suburbs", "in the outskirts"] },
  { q: "49- I start work -------------------7:30 a.m. and I work until 3:30.", a: "b", options: ["in", "at", "on", "early"] },
  { q: "50- Sayed Darwish was the -------------------of his family.", a: "b", options: ["working class", "breadwinner", "exile", "patriot"] }
];



    
        let currentTFQuestion = 0;
        let tfCorrectAnswers = 0;
        let currentQuestion = 0;
        let correctAnswers = 0;
        let timeLeft = 3600;
        let timerInterval;
        let startTime;
    
      /**
       * 
 * Ø±Ø§Ø¨Ø· Web App (Ø§Ø³ØªØ¨Ø¯Ù„ Ù„Ùˆ Ø¹Ù†Ø¯Ùƒ ID Ù…Ø®ØªÙ„Ù)
 */


 
const CHECK_URL = "https://script.google.com/macros/s/AKfycbxr0F9VfFA5hmITyLgPtHrjBD3umZAwFtKJxzVy0vShJdY8tjq6q1CanJ5gH92IAPPV/exec";

/**
 * ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± doGet?action=checkDuplicate
 * ÙŠØ±Ø¬Ø¹ ÙƒØ§Ø¦Ù† { ok: true } Ø£Ùˆ { ok: false, message: "..." }
 */


 
async function checkDuplicate(name, phone, quizName) {
  const url = `${CHECK_URL}?action=checkDuplicate&name=${encodeURIComponent(name)}&phone=${encodeURIComponent(phone)}&quizName=${encodeURIComponent(quizName)}`;
  console.log("Checking URL:", url);
  try {
    const res = await fetch(url, { method: 'GET', cache: 'no-store' });
    console.log("Fetch response:", res);
    if (!res.ok) {
      return { ok: false, message: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ (HTTP ' + res.status + ')' };
    }
    const data = await res.json();
    console.log("Data from server:", data);
    if (data.status === 'duplicate') return { ok: false, message: data.message };
    if (data.status === 'ok') return { ok: true };
    return { ok: false, message: data.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±.' };
  } catch (err) {
    console.error("checkDuplicate error:", err);
    return { ok: false, message: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.' };
  }
}

async function startQuiz(event) {
  // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„
  let name = document.getElementById("traineeName").value.trim();
  let phone = document.getElementById("traineePhone").value.trim();
  let traineeCode = document.getElementById("traineeCode").value.trim();
  let password = document.getElementById("password").value;
  let course = document.getElementById("courseName").value.trim();
  let quizTitle = document.getElementById("quizTitle");

  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙØ± Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ† Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯
  if (phone.startsWith('0')) {
      phone = phone.substring(1);
  }

  // ØªØ­Ù‚Ù‚ Ù…Ø­Ù„ÙŠ Ø³Ø±ÙŠØ¹
  if (!name) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…."); return; }
  if (!phone) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†."); return; }
  if (!traineeCode) { alert("â— Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ."); return; }
  if (password !== "1800") { alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!"); return; }

  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ ÙˆØªØ¹Ø·ÙŠÙ„Ù‡
  const startBtn = event && event.currentTarget ? event.currentTarget : document.querySelector('.btn');
  let prevText = startBtn ? startBtn.innerText : "Start Quiz";

  if (startBtn) {
    startBtn.disabled = true;
    startBtn.innerText = "Checking...";
  }

  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
  const quizName = course || "Unknown";
  let check;
  try {
    check = await checkDuplicate(name, phone, quizName);
    console.log("Data from server:", check);
  } catch (err) {
    console.error(err);
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±.");
    if (startBtn) {
      startBtn.disabled = false;
      startBtn.innerText = prevText;
    }
    return;
  }

  // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²Ø± Ù„ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
  if (startBtn) {
    startBtn.disabled = false;
    startBtn.innerText = prevText;
  }

  // Ù…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙƒØ±Ø±
  if (!check.ok) {
    showDuplicateMessage(check.message);
    return;
  }

  // Ù„Ùˆ ÙƒÙ„ Ø´ÙŠØ¡ ØªÙ…Ø§Ù…: Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
  quizTitle.textContent = course || "Final(A1)Test";
  window.traineeData = { name, phone, traineeCode, course };

  document.getElementById("startScreen").style.display = "none";
  document.getElementById("quizContainer").style.display = "block";

  startTime = new Date();
  startTimer();
  loadTFQuestion();

  // ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
  let elem = document.documentElement;
  if (elem.requestFullscreen) { elem.requestFullscreen(); }
  else if (elem.mozRequestFullScreen) { elem.mozRequestFullScreen(); }
  else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
  else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
}

    
function showDuplicateMessage(message) {
    const msgBox = document.getElementById("duplicateMessage");
    const msgText = document.getElementById("duplicateText");

    msgText.textContent = message || "âŒ ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ù‹Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±.";
    msgBox.style.display = "flex";

    // Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
        msgBox.style.display = "none";
    }, 3000);
}



        function startTimer() {
            timerInterval = setInterval(() => {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                document.getElementById("timer").innerText = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showResult();
                }
                timeLeft--;
            }, 1000);
        }
    
      function loadTFQuestion() {
    let quizDiv = document.getElementById("quiz");
    let passageDiv = document.getElementById("passage");

    if (currentTFQuestion < trueFalseQuestions.length) {
        let q = trueFalseQuestions[currentTFQuestion];

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚Ø·Ø¹
        passageDiv.innerHTML = `
            <h3>Read the following passage carefully and answer the question:</h3>
            <p style="font-size: 22px;">${q.passage}</p>
        `;

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª
        let questionHTML = `<p class='question'><strong>${currentTFQuestion + 1}- ${q.q}</strong></p>`;

        q.options.forEach((option, index) => {
    const letter = String.fromCharCode(97 + index); // "a", "b", ...
    questionHTML += `
        <label>
            <input type='radio' name='answer' value='${letter}'>
            ${option}
        </label><br>
    `;
});

        questionHTML += `<button class='btn' onclick='nextTFQuestion()'>Next</button>`;
        quizDiv.innerHTML = questionHTML;
    } else {
        // Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        document.getElementById("passage").style.display = "none";
        quizDiv.innerHTML = "<p>You've finished all reading questions.</p>";
        loadQuestion(); // Ù„Ùˆ ÙÙŠÙ‡ Ù…Ø±Ø­Ù„Ø© ØªØ§Ù†ÙŠØ©
    }
}

    
  function nextTFQuestion() {
  const selectedAnswer = document.querySelector("input[name='answer']:checked");
  if (!selectedAnswer) {
    alert("Please select an answer");
    return;
  }

  const q = trueFalseQuestions[currentTFQuestion];
  const selectedValue = selectedAnswer.value;

  const isAnswerKeyALetter = q.a.length === 1 && ["a", "b", "c", "d"].includes(q.a.toLowerCase());

  if (isAnswerKeyALetter) {
    if (selectedValue === q.a.toLowerCase()) {
      tfCorrectAnswers++; // âœ… ØµØ­Ø­ Ù‡Ù†Ø§ Ø¨Ø¯Ù„ score
    }
  } else {
    const selectedOptionIndex = selectedValue.charCodeAt(0) - 97;
    const selectedOptionText = q.options[selectedOptionIndex];

    if (selectedOptionText.trim().toLowerCase() === q.a.trim().toLowerCase()) {
      tfCorrectAnswers++; // âœ… ØµØ­Ø­ Ù‡Ù†Ø§ Ø¨Ø¯Ù„ score
    }
  }

  currentTFQuestion++;
  loadTFQuestion();
}




        function loadQuestion() {
            let quizDiv = document.getElementById("quiz");
            let q = questions[currentQuestion];
            quizDiv.innerHTML = `<p class='question'>${q.q}</p>` +
                q.options.map((option, index) => `<label><input type='radio' name='answer' value='${String.fromCharCode(97 + index)}'> ${option}</label>`).join('') +
                `<button class='btn' onclick='nextQuestion()'>${currentQuestion === questions.length - 1 ? "Finish" : "Next"}</button>`;
        }
    
        function nextQuestion() {
            let selectedAnswer = document.querySelector("input[name='answer']:checked");
            if (!selectedAnswer) return;
            if (selectedAnswer.value === questions[currentQuestion].a) {
                correctAnswers++;
            }
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                showResult();
            }
        }
    
let serverUrl = ""; // Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©

// Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø®Ø²Ù† ÙÙŠ GitHub
function fetchServerUrl() {
fetch("https://raw.githubusercontent.com/etiqotwf/liveServer1/main/serverUrl.json")
        .then(response => response.json())
        .then(data => {
            if (data.serverUrl) {
                serverUrl = data.serverUrl;
                console.log("âœ… Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ø¯Ø« Ù…Ù† GitHub:", serverUrl);
            } else {
                console.error("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.");
                retryFetchServerUrl();
            }
        })
        .catch(error => {
            console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ù† GitHub:", error);
            retryFetchServerUrl();
        });
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
function retryFetchServerUrl() {
    if (retryCount < MAX_RETRIES) {
        retryCount++;
        console.log(`ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (${retryCount}/${MAX_RETRIES}) Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù...`);
        setTimeout(fetchServerUrl, 3000);
    } else {
        console.error("â›” ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±.");
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
fetchServerUrl();
function showResult() {
    // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª
    clearInterval(timerInterval);

    // âœ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ Ù…Ù† window (Ø¹Ø´Ø§Ù† Ù…ÙŠØ¸Ù‡Ø±Ø´ undefined)
    const traineeData = window.traineeData || {};

    // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚
    let endTime = new Date();
    let timeTaken = Math.floor((endTime - startTime) / 1000);
    let minutesTaken = Math.floor(timeTaken / 60);
    let secondsTaken = timeTaken % 60;

    // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨
    let name = traineeData.name || document.getElementById("traineeName").value || "Unknown";
    let phone = traineeData.phone || document.getElementById("traineePhone").value || "Unknown";
    let traineeCode = traineeData.traineeCode || document.getElementById("traineeCode").value || "Unknown";
    let date = new Date().toLocaleDateString("en-US");
    let course = traineeData.course || document.getElementById("courseName").value || "Unknown";

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
    let totalQuestions = trueFalseQuestions.length + questions.length;
    let totalCorrectAnswers = tfCorrectAnswers + correctAnswers;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†ØªÙŠØ¬Ø©
    let resultData = {
        name,
        phone,
        traineeCode,
        date,
        course,
        startTime: startTime.toLocaleString("en-GB", {
            timeZone: "Africa/Cairo",
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "numeric",
            minute: "numeric",
            second: "numeric",
            hour12: true
        }),
        timeTaken: `${minutesTaken} min ${secondsTaken} sec`,
        score: `${totalCorrectAnswers} / ${totalQuestions}`
    };

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± Ø¥Ø°Ø§ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·
    if (!serverUrl) {
        console.log("â³ Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±...");
        fetchServerUrl().then(() => {
            if (serverUrl) sendDataToServer(resultData);
            else {
                console.error("âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ø¹Ø¯.");
                alert("âš ï¸ ØªØ¹Ø°Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.");
            }
        });
    } else sendDataToServer(resultData);

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Sheets
    sendDataToGoogleSheet(resultData);

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    document.getElementById("resultCourse").innerText = course;
    document.getElementById("resultName").innerText = name;
    document.getElementById("resultPhone").innerText = phone;
    document.getElementById("resultCode").innerText = traineeCode; // âœ… Ø§Ù„ÙƒÙˆØ¯ Ù‡ÙŠØ¸Ù‡Ø± ØµØ­ Ø¯Ù„ÙˆÙ‚ØªÙŠ
    document.getElementById("resultDate").innerText = date;
    document.getElementById("resultStartTime").innerText = startTime.toLocaleTimeString();
    document.getElementById("resultTime").innerText = `${minutesTaken} min ${secondsTaken} sec`;
    document.getElementById("resultScore").innerText = `${totalCorrectAnswers} / ${totalQuestions}`;

    // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±
    displayRatingFromNumber(totalCorrectAnswers, totalQuestions);

    // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©
    const title = document.getElementById('resultTitle');
    const scorePercentage = totalCorrectAnswers / totalQuestions;
    if(scorePercentage >= 0.20){
        title.innerText = "ğŸ‰ Congratulations! ğŸ‰";
        launchFireworks();
    } else {
        title.innerText = "ğŸ˜” Better luck next time!";
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    document.getElementById("quizContainer").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";
}


// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
function sendDataToServer(resultData) {
    fetch(`${serverUrl}/submit`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(resultData)
    })
    .then(response => response.json())
    .then(data => console.log("âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ù†Ø¬Ø§Ø­:", data))
    .catch(error => console.error("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±:", error));
}





function sendDataToGoogleSheet(resultData) {
    const formData = new URLSearchParams();
    formData.append("course", resultData.course);
    formData.append("name", resultData.name);
    formData.append("phone", resultData.phone);
    formData.append("date", resultData.date);
    formData.append("startTime", resultData.startTime);
    formData.append("timeTaken", resultData.timeTaken);
    formData.append("score", resultData.score);
    formData.append("course", resultData.course);


    fetch("https://script.google.com/macros/s/AKfycbxr0F9VfFA5hmITyLgPtHrjBD3umZAwFtKJxzVy0vShJdY8tjq6q1CanJ5gH92IAPPV/exec", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
        },
        body: formData.toString(),
    })
    .then(response => response.text())
    .then(responseText => {
        console.log("âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Google Sheet:", responseText);
    })
    .catch(error => {
        console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Google Sheet:", error);
    });
}




    </script>
    </body>
</html>
