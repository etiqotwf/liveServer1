<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ICDL - 12 Groups Schedule (10 Weeks)</title>
<style>
* {
  direction: ltr !important;
  unicode-bidi: plaintext !important;
}

body {
  font-family: "Arial", "Segoe UI", Tahoma, sans-serif;
  text-align: left;
  margin: 16px;
  color:#222;
  font-size: 14pt;
}

h1 { text-align:center; font-size:22pt; margin-bottom:6px; }
.meta { text-align:center; margin-bottom:12px; color:#444; }
table{ width:100%; border-collapse:collapse; margin-bottom:18px; page-break-inside:avoid; }
th, td { border:1px solid #555; padding:8px 6px; text-align:center; vertical-align:middle; }
th{ background:#2e7d32; color:#fff; font-weight:700; font-size:13pt; }
.legend { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-bottom:12px; }
.colorbox{ width:18px; height:14px; display:inline-block; margin-right:8px; border:1px solid #666; vertical-align:middle; }
.small { font-size:11pt; color:#333; }
.summary { margin-top:18px; border-top:2px solid #ddd; padding-top:12px; font-size:13pt; }
#printBtn { position: fixed; left: 16px; bottom: 16px; background:#1976d2; color:#fff; border:none; padding:10px 14px; border-radius:6px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
@media print{
  #printBtn { display:none; }
  body { margin:6mm; }
  th, td { page-break-inside:avoid; }
}

.main-title {
  text-align: center;
  font-size: 34pt;
  font-weight: bold;
  margin-bottom: 25px;
  background: linear-gradient(90deg, #1976d2, #da4a26);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 1.3;
}

h2 {
  text-align: center;
  font-size: 22pt;
  margin-bottom: 20px;
  color: #2c3e50;
}

.instructions {
  margin: 15px auto;
  max-width: 800px;
  border: 1px solid #ccc;
  border-radius: 8px;
  overflow: hidden;
  font-size: 14pt;
}

.toggle-btn {
  width: 100%;
  background: #1976d2;
  color: white;
  padding: 12px 16px;
  text-align: right;
  border: none;
  outline: none;
  font-size: 16pt;
  cursor: pointer;
  font-weight: bold;
}

.toggle-btn:hover { background: #1565c0; }

.content {
  display: none;
  padding: 12px 16px;
  background: #f9f9f9;
  line-height: 1.6;
  direction: rtl;
}

/* ğŸŒŸ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
}


.game-btn {
  background: linear-gradient(45deg, #ff416c, #ff4b2b); /* Ø£Ù„ÙˆØ§Ù† Ù…ØªØ¯Ø±Ø¬Ø© */
  color: #fff;
  font-size: 16pt;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  letter-spacing: 1px;
  text-transform: uppercase;
  box-shadow: 0 0 15px rgba(255, 65, 108, 0.7);
  transition: all 0.3s ease-in-out;
  display: block;
  margin: 12px auto; /* ÙŠØ®Ù„ÙŠ Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ù†Øµ */
}

/* Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ */
.game-btn:hover {
  background: linear-gradient(45deg, #ff4b2b, #ff416c);
  transform: scale(1.1);
  box-shadow: 0 0 25px rgba(255, 75, 43, 0.9);
}

/* Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· */
.game-btn:active {
  transform: scale(0.95);
  box-shadow: 0 0 10px rgba(255, 65, 108, 0.6);
}

.modal-content {
  background: #fff;
  margin: 10% auto;
  padding: 20px;
  border-radius: 10px;
  width: 90%; max-width: 400px;
  text-align: center;
  font-size: 14pt;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.modal h3 { margin-bottom: 15px; color: #1976d2; }

.modal input {
  width: 90%; padding: 10px; margin: 10px 0;
  border: 1px solid #ccc; border-radius: 6px;
  font-size: 14pt;
}

.modal button {
  padding: 10px 16px; margin: 8px;
  border: none; border-radius: 6px;
  font-size: 14pt; cursor: pointer;
}

#saveBtn { background: #2e7d32; color: #fff; }
#cancelBtn { background: #d32f2f; color: #fff; }

#membersList {
  margin-top: 40px;
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  justify-content: flex-start;
}

.group-table {
  border-collapse: collapse;
  width: 250px;
  min-width: 200px;
  font-size: 12pt;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  border-radius: 8px;
  overflow: hidden;
  flex: 0 0 auto; /* ØªØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ© Ø§Ù„Ø¹Ø±Ø¶ ÙˆØªÙ„ØªØµÙ‚ Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶ */
}

.group-table th {
  color: #fff;
  padding: 8px;
  font-size: 13pt;
  text-align: center;
}

.group-table td {
  border: 1px solid #ccc;
  padding: 6px;
  text-align: center;
}


.trainee-questions {
  margin: 15px auto;
  max-width: 800px;
  border: 1px solid #ccc;
  border-radius: 8px;
  overflow: hidden;
  font-size: 14pt;
}

.toggle-questions-btn {
  width: 100%;
  background: #f4511e;
  color: white;
  padding: 12px 16px;
  text-align: right;
  border: none;
  outline: none;
  font-size: 16pt;
  cursor: pointer;
  font-weight: bold;
}

.toggle-questions-btn:hover { background: #d84315; }

.questions-content {
  max-height: 145px;   /* Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø£Ù‚ØµÙ‰ */
  overflow-y: auto;    /* Ø³ÙƒØ±ÙˆÙ„ Ù„Ùˆ Ø²Ø§Ø¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
  border: 1px solid #ccc;
  border-radius: 10px;
  background: hwb(157 45% 8%);
  padding: 16px;
  direction: rtl;
  font-size: 16px;
  line-height: 1.6;
}

/* ÙƒÙ„ Ø³Ø¤Ø§Ù„ */
.questions-content li {
  list-style: none; 
  background: #ffffff;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 14px 16px;
  margin-bottom: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  transition: transform 0.2s, box-shadow 0.2s;

  font-size: 18px;   /* ğŸ‘ˆ ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· */
  font-weight: 500;  /* Ø®Ø· Ø£ÙˆØ¶Ø­ */
  color: #333;       /* Ù„ÙˆÙ† Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© */
  line-height: 1.7;  /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø³Ø·ÙˆØ± */
}

/* ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
.questions-content li:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
  border-color: #ffa726;
}


/* âœ… Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª ÙˆØ§Ù„Ø²Ø± */
.questions-controls {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.questions-controls input {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14pt;
  box-sizing: border-box;
}

.questions-controls button {
  align-self: center;
}

</style>
</head>
<body>
  

<h1 class="main-title">
  International Learning Center (ILC ğŸ“)
</h1>

<h2>ğŸ“… ICDL Schedule â€” 12 Groups (10 Weeks)</h2>
<div class="meta">Training Days: Sunday â†’ Thursday Â· Time: 3:00 â€“ 6:00 PM Â· 3 sessions per day</div>

<div class="instructions">
  <button class="toggle-btn">ğŸ“˜  Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</button>
  <div class="content">
    <ul>
      <li>ğŸŸ¢ Ù‚Ù… Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ø±ÙˆØ¨ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ØŒ Ø³ÙŠØ¸Ù‡Ø± Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ³Ø¬ÙŠÙ„. Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ "âœ”ï¸ Ø­ÙØ¸"ØŒØ«Ù… Ø§ÙˆÙƒ  Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ø³Ù…Ùƒ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©.</li>
      <li>âœ… Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ´Ù† Ø§Ù„ÙˆØ§Ø¬Ø¨ Ø­Ø¶ÙˆØ±Ù‡ Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨ 12 Ø³ÙŠØ´Ù†</li>
      <li>â³ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø·Ø§Ù„Ø¨ Ø¶ØºØ· Ø§Ù„Ù…Ø¯Ø© Ø¨Ø­Ø¶ÙˆØ± Ø£ÙƒØ«Ø± Ù…Ù† ÙƒÙ„Ø§Ø³ Ø¨Ø´Ø±Ø· Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø¹Ù‡Ø¯ ÙˆØ³Ù…Ø§Ø­ Ø§Ù„ÙƒÙ„Ø§Ø³</li>
      <li>âš ï¸ Ù„Ø§Ø¨Ø¯ Ø¹Ø¯Ù… ØªØ¬Ø§ÙˆØ² Ù…Ø¯Ø© Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„ÙƒÙ„ÙŠØ© Ù„Ø§Ø³ØªÙŠÙØ§Ø¡ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ´Ù† Ø§Ù„Ù…Ù‚Ø±Ø±</li>
      <li>ğŸ“‘ Ø³ÙˆÙ ÙŠØªÙ… Ø¹Ù…Ù„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙƒÙˆØ±Ø³ ÙˆØ°Ù„Ùƒ Ø¨Ø¹Ø¯ Ø§Ø³ØªÙŠÙØ§Ø¡ Ù…Ø¯Ø© Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ù…Ù‚Ø±Ø±Ø©</li>
    </ul>
  </div>
</div>


<div class="trainee-questions">
  <button class="toggle-questions-btn">â“ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
  
  <!-- âœ… Ù†Ø®Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ù…Ø¯Ø®Ù„Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙƒÙˆÙ†ØªÙŠÙ†Ø± -->
  <div id="questionsSection" style="display:none;">
    <div class="questions-content">
      <ul id="questionsList">
        <li><em>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯</em></li>
      </ul>
    </div>

    <!-- âœ… Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø¨ÙˆÙƒØ³ -->
    <div class="questions-controls">
      <input type="text" id="newQuestionName" placeholder="âœï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
      <input type="text" id="newQuestion" placeholder="âœï¸ Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§">
      <button id="askBtn" class="game-btn">ğŸš€ Ø£Ø±Ø³Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„</button>
    </div>
  </div>
</div>




<!-- âœ… Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ -->
<div id="nameModal" class="modal">
  <div class="modal-content">
    <h3 id="modalTitle">Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙ‰ Ø§Ù„Ø¬Ø±ÙˆØ¨</h3>
    <input type="text" id="studentName" placeholder="âœï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
    <div>
      <button id="saveBtn">âœ”ï¸ Ø­ÙØ¸</button>
      <button id="cancelBtn">âŒ Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<div id="legend" class="legend small"></div>

<table id="scheduleTable" aria-label="Schedule table">
  <thead>
    <tr>
      <th>Week / Day</th>
      <th>3:00 â€“ 4:00</th>
      <th>4:00 â€“ 5:00</th>
      <th>5:00 â€“ 6:00</th>
    </tr>
  </thead>
  <tbody id="tbody"></tbody>
</table>

<div id="summary" class="summary"></div>
<div id="membersList" style="margin-top:40px;"></div>

<button id="printBtn" onclick="window.print()">ğŸ–¨ï¸ Save as PDF / Print</button>



<script>
    // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„ØµÙØ­Ø©ØŒ Ø£Ø¯Ø®Ù„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
    document.addEventListener("click", () => {
      const elem = document.documentElement; // Ø£Ùˆ document.getElementById("myForm")
      if (document.fullscreenElement) return; // Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¡ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©

      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) { /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) { /* IE11 */
        elem.msRequestFullscreen();
      }
    });
  </script>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwiD1EeTqfOnRpaazL-AdeS6fYplihCcHF00ggC6QmH07l6L0ZAg25z3dJYH9kuH6OLhg/exec";

(function(){
  const groups = Array.from({length:12}, (_,i) => 'G' + (i+1));
  const colors = ['#FFCDD2','#BBDEFB','#C8E6C9','#FFF9C4','#FFCCBC','#D1C4E9',
                  '#B2EBF2','#F0F4C3','#FFECB3','#FFE0B2','#DCEDC8','#F8BBD0'];
  const weeks = 10, daysPerWeek = 5, slotsPerDay = 3;
  let startDate = new Date(2025, 7, 31);
  const dayNames = ['Sunday','Monday','Tuesday','Wednesday','Thursday'];

  const tbody=document.getElementById('tbody');

  // âœ… ØªÙˆØ²ÙŠØ¹ Ø«Ø§Ø¨Øª Ù„Ù„Ø¬Ø±ÙˆØ¨Ø§Øª
  const groupDistribution = [];
  for(let i=0;i<12;i++){
    for(let j=0;j<12;j++){
      groupDistribution.push(groups[j]); // ÙƒÙ„ Ù…Ø¬Ù…ÙˆØ¹Ø© ØªØªÙƒØ±Ø± 12 Ù…Ø±Ø© Ù…ØªØªØ§Ø¨Ø¹Ø©
    }
  }
  // Ù†Ø¶ÙŠÙ Ø£ÙŠ Ø¬Ù„Ø³Ø§Øª Ù†Ø§Ù‚ØµØ© Ø¥Ø°Ø§ Ù„Ø²Ù…
  while(groupDistribution.length < weeks * daysPerWeek * slotsPerDay){
    groupDistribution.push(groups[groupDistribution.length % groups.length]);
  }

  // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„
  let idx = 0;
  for(let w=1; w<=weeks; w++){
    for(let d=0; d<daysPerWeek; d++){
      const tr = document.createElement('tr');
      const thisDate = new Date(startDate);
      thisDate.setDate(startDate.getDate() + (w-1)*7 + d);
      const tdDay = document.createElement('td');
      tdDay.innerHTML = `Week ${w} â€” ${dayNames[d]} (${thisDate.toLocaleDateString('en-GB',{day:'2-digit',month:'short',year:'numeric'})})`;
      tr.appendChild(tdDay);

      for(let s=0; s<slotsPerDay; s++){
        const g = groupDistribution[idx++];
        const td = document.createElement('td');
        td.textContent = g;
        td.style.background = colors[groups.indexOf(g)];
        td.style.cursor = "pointer";
        td.addEventListener("click", ()=>openModal(g));
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    }
  }

  // âœ… modal handling
  const modal=document.getElementById("nameModal");
  const modalTitle=document.getElementById("modalTitle");
  const studentNameInput=document.getElementById("studentName");
  let currentGroup=null;

  function openModal(group){
    currentGroup=group;
    modalTitle.textContent="Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙ‰ " + group;
    studentNameInput.value="";
    modal.style.display="block";
  }

  document.getElementById("saveBtn").addEventListener("click", async ()=> {
  const name = studentNameInput.value.trim();
  if(!name || !currentGroup) return;

  // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ·
  const saveBtn = document.getElementById("saveBtn");
  saveBtn.disabled = true;
  saveBtn.style.opacity = 0.6; // Ù„ØªÙˆØ¶ÙŠØ­ Ø£Ù†Ù‡ ØªÙ… Ø§Ù„ØªØ¹Ø·ÙŠÙ„

  try {
    const res = await fetch(scriptURL + "?action=get");
    const data = await res.json();

    const grouped = {};
    data.forEach(row=>{
      if(!grouped[row.group]) grouped[row.group]=[];
      grouped[row.group].push(row.name);
    });

    if(grouped[currentGroup] && grouped[currentGroup].length >= 10){
      alert(`âš ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ${currentGroup} Ù…ÙƒØªÙ…Ù„Ø©ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…ØªØ¯Ø±Ø¨ Ø¬Ø¯ÙŠØ¯`);
      modal.style.display="none";
      saveBtn.disabled = false;
      saveBtn.style.opacity = 1;
      return;
    }

    const formData = new URLSearchParams();
    formData.append("name", name);
    formData.append("group", currentGroup);
    formData.append("date", new Date().toLocaleString());

    await fetch(scriptURL, { method: "POST", body: formData });

    alert("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!");
    await loadMembers();

  } catch(err){
    console.error("Error saving member", err);
  }

  modal.style.display="none";

  // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
  saveBtn.disabled = false;
  saveBtn.style.opacity = 1;
});

  document.getElementById("cancelBtn").addEventListener("click",()=>{ modal.style.display="none"; });
  window.onclick=function(e){ if(e.target===modal){ modal.style.display="none"; } };

  // âœ… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙˆØ¹Ø±Ø¶ Ø§Ù„ÙƒØ±ÙˆØª
  async function loadMembers(){
    try{
      const res = await fetch(scriptURL + "?action=get");
      const data = await res.json();

      const grouped = {};
      data.forEach(row=>{
        if(!grouped[row.group]) grouped[row.group]=[];
        grouped[row.group].push(row.name);
      });

      const container=document.getElementById("membersList");
      container.innerHTML="";
      container.style.display="flex";
      container.style.flexWrap="wrap";
      container.style.gap="12px";

      const nameColors = ['#e53935','#8e24aa','#3949ab','#00897b','#f4511e','#6d4c41','#fdd835','#43a047','#1e88e5','#d81b60'];
      const emojis = ['ğŸ“','ğŸ–Šï¸','ğŸ“š','ğŸ“','ğŸ’¡','ğŸ†','ğŸŒŸ','ğŸ”¥','âœ…','ğŸ¯'];

      groups.forEach((g,i)=>{
        const div=document.createElement("div");
        div.style.flex="1 1 220px";
        div.style.maxWidth="250px";
        div.style.background=colors[i];
        div.style.borderRadius="12px";
        div.style.overflow="hidden";
        div.style.boxShadow="0 4px 12px rgba(0,0,0,0.25)";
        div.dataset.group = g;
        div.style.transition = "transform 0.3s";
        div.onmouseover = ()=> div.style.transform="scale(1.03)";
        div.onmouseleave = ()=> div.style.transform="scale(1)";

        const title = document.createElement("div");
        title.textContent = `ğŸ§‘â€ğŸ¤â€ğŸ§‘ Ù…Ø¬Ù…ÙˆØ¹Ø© ${g}`;
        title.style.fontWeight = "bold";
        title.style.fontSize = "16pt";
        title.style.textAlign = "center";
        title.style.padding = "10px 0";
        title.style.background = "rgba(255,255,255,0.2)";
        div.appendChild(title);

        const table = document.createElement("table");
        table.style.width="100%";
        table.style.borderCollapse="collapse";
        const tbodyInner = document.createElement("tbody");

        if(grouped[g]){
          grouped[g].forEach((n,index)=>{
            const tr = document.createElement("tr");
            const td = document.createElement("td");
            td.textContent = `${emojis[index % emojis.length]} ${n}`;
            td.style.color = nameColors[index % nameColors.length];
            td.style.fontSize = "14pt";
            td.style.fontWeight = "600";
            td.style.padding = "6px";
            td.style.textAlign = "center";
            tr.appendChild(td);
            tbodyInner.appendChild(tr);
          });
        } else {
          const tr = document.createElement("tr");
          const td = document.createElement("td");
          td.innerHTML = "<em>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø³Ù…Ø§Ø¡ Ø¨Ø¹Ø¯</em>";
          td.style.fontSize = "13pt";
          td.style.fontStyle = "italic";
          td.style.color = "#333";
          td.style.padding = "6px";
          td.style.textAlign = "center";
          tr.appendChild(td);
          tbodyInner.appendChild(tr);
        }

        table.appendChild(tbodyInner);
        div.appendChild(table);
        container.appendChild(div);
      });

    } catch(err){
      console.error("Error loading members", err);
    }
  }

  loadMembers();

})();

// ğŸŒŸ toggle Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª
const toggleBtn = document.querySelector(".toggle-btn");
const instructionsContent = document.querySelector(".content");

toggleBtn.addEventListener("click", () => {
  if(instructionsContent.style.display === "block"){
    instructionsContent.style.display = "none";
  } else {
    instructionsContent.style.display = "block";
  }
});



// toggle Ø¹Ø±Ø¶ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†
// toggle Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
const toggleQuestionsBtn = document.querySelector(".toggle-questions-btn");
const questionsSection = document.getElementById("questionsSection");

toggleQuestionsBtn.addEventListener("click", () => {
  questionsSection.style.display = 
    questionsSection.style.display === "block" ? "none" : "block";
});

// Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø§Ø¦Ø­Ø©
const askBtn = document.getElementById("askBtn");
const newQuestionInput = document.getElementById("newQuestion");
const newQuestionNameInput = document.getElementById("newQuestionName");
const questionsList = document.getElementById("questionsList");

async function loadQuestions() {
  try {
    const res = await fetch(scriptURL + "?action=question");
    const data = await res.json();

    questionsList.innerHTML = "";

    if(data.length === 0){
      const li = document.createElement("li");
      li.innerHTML = "<em>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯</em>";
      questionsList.appendChild(li);
    } else {
      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
      data.sort((a, b) => new Date(b.date) - new Date(a.date));

      data.forEach(q => {
        const li = document.createElement("li");
        const dateStr = new Date(q.date).toLocaleString();
        const isAdmin = q.name.toLowerCase().includes("Ù…Ø³ØªØ±"); // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ø¯Ù…Ù†

        if(isAdmin){
          li.innerHTML = `
            <span style="color:#d32f2f; font-weight:bold;">ğŸ›¡ï¸ [${q.name}]</span>
            <span style="color:#d32f2f; font-weight:bold;"> â— ${q.question}</span>
            <span style="color:#555; font-size:10pt; margin-left:8px; font-weight:bold;">(${dateStr})</span>
          `;
        } else {
          li.innerHTML = `
            <span style="color:#1e88e5; font-weight:bold;">ğŸ“ [${q.name}]</span>
            <span style="color:#2e7d32; font-weight:bold;"> â“ ${q.question}</span>
            <span style="color:#555; font-size:10pt; margin-left:8px; font-weight:bold;">(${dateStr})</span>
          `;
        }

        questionsList.appendChild(li);
      });
    }

  } catch(err) {
    console.error("Error loading questions", err);
  }
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
loadQuestions();



askBtn.addEventListener("click", async () => {
    const question = newQuestionInput.value.trim();
    const name = newQuestionNameInput.value.trim();
    if(!question || !name) return alert("âš ï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙˆØ³Ø¤Ø§Ù„Ùƒ!");

    try {
        const formData = new URLSearchParams();
        formData.append("question", question);
        formData.append("name", name); // Ø§Ù„Ø§Ø³Ù…
        formData.append("date", new Date().toLocaleString());
        formData.append("action", "question");

        await fetch(scriptURL, { method: "POST", body: formData });

        await loadQuestions();
        newQuestionInput.value = "";
        newQuestionNameInput.value = "";

    } catch(err){
        console.error("Error sending question", err);
        alert("âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„!");
    }
});

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
// âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
async function loadQuestions() {
  try {
    const res = await fetch(scriptURL + "?action=question");
    const data = await res.json();

    const questionsList = document.getElementById("questionsList");
    questionsList.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…

    if(data.length === 0){
      const li = document.createElement("li");
      li.innerHTML = "<em>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯</em>";
      questionsList.appendChild(li);
    } else {
      // âœ… ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹
      data.sort((a, b) => new Date(b.date) - new Date(a.date));

      data.forEach(q => {
        const li = document.createElement("li");
        const dateStr = new Date(q.date).toLocaleDateString("ar-EG", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric"
        }) + " - " + new Date(q.date).toLocaleTimeString("ar-EG");

        const isAdmin = q.name.toLowerCase().includes("Ù…Ø³ØªØ±");

        if(isAdmin){
          li.innerHTML = `
            <span style="color:#d32f2f; font-weight:bold;">ğŸ›¡ï¸ [${q.name}]</span>
            <span style="color:#d32f2f; font-weight:bold;">  ${q.question}</span>
            <span style="color:#555; font-size:10pt; margin-left:8px; font-weight:bold;">ğŸ•’ ${dateStr}</span>
          `;
        } else {
          li.innerHTML = `
            <span style="color:#1e88e5; font-weight:bold;">ğŸ“ [${q.name}]</span>
            <span style="color:#2e7d32; font-weight:bold;">  ${q.question}</span>
            <span style="color:#555; font-size:10pt; margin-left:8px; font-weight:bold;">ğŸ•’ ${dateStr}</span>
          `;
        }

        questionsList.appendChild(li);
      });
    }

  } catch(err) {
    console.error("Error loading questions", err);
  }
}

// âœ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
loadQuestions();


</script>

</body>
</html>
